(function(e){function t(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent)return e.attachEvent("on"+t,n)}function n(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function r(e,t){var n;e.createTextRange?(n=e.createTextRange(),n.move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function i(e,t){try{return e.type=t,!0}catch(n){return!1}}e.Placeholders={Utils:{addEventListener:t,inArray:n,moveCaret:r,changeType:i}}})(this),function(e){function _(){}function D(){try{return document.activeElement}catch(e){}}function P(e,t){var n,r,i=!!t&&e.value!==t,o=e.value===e.getAttribute(a);return(i||o)&&e.getAttribute(f)==="true"?(e.removeAttribute(f),e.value=e.value.replace(e.getAttribute(a),""),e.className=e.className.replace(s,""),r=e.getAttribute(v),parseInt(r,10)>=0&&(e.setAttribute("maxLength",r),e.removeAttribute(v)),n=e.getAttribute(l),n&&(e.type=n),!0):!1}function H(e){var t,n,r=e.getAttribute(a);return e.value===""&&r?(e.setAttribute(f,"true"),e.value=r,e.className+=" "+i,n=e.getAttribute(v),n||(e.setAttribute(v,e.maxLength),e.removeAttribute("maxLength")),t=e.getAttribute(l),t?e.type="text":e.type==="password"&&w.changeType(e,"text")&&e.setAttribute(l,"password"),!0):!1}function B(e,t){var n,r,i,s,f,l,c;if(e&&e.getAttribute(a))t(e);else{i=e?e.getElementsByTagName("input"):o,s=e?e.getElementsByTagName("textarea"):u,n=i?i.length:0,r=s?s.length:0;for(c=0,l=n+r;c<l;c++)f=c<n?i[c]:s[c-n],t(f)}}function j(e){B(e,P)}function F(e){B(e,H)}function I(e){return function(){E&&e.value===e.getAttribute(a)&&e.getAttribute(f)==="true"?w.moveCaret(e,0):P(e)}}function q(e){return function(){H(e)}}function R(e){return function(t){x=e.value;if(e.getAttribute(f)==="true"&&x===e.getAttribute(a)&&w.inArray(n,t.keyCode))return t.preventDefault&&t.preventDefault(),!1}}function U(e){return function(){P(e,x),e.value===""&&(e.blur(),w.moveCaret(e,0))}}function z(e){return function(){e===D()&&e.value===e.getAttribute(a)&&e.getAttribute(f)==="true"&&w.moveCaret(e,0)}}function W(e){return function(){j(e)}}function X(e){e.form&&(L=e.form,typeof L=="string"&&(L=document.getElementById(L)),L.getAttribute(c)||(w.addEventListener(L,"submit",W(L)),L.setAttribute(c,"true"))),w.addEventListener(e,"focus",I(e)),w.addEventListener(e,"blur",q(e)),E&&(w.addEventListener(e,"keydown",R(e)),w.addEventListener(e,"keyup",U(e)),w.addEventListener(e,"click",z(e))),e.setAttribute(h,"true"),e.setAttribute(a,C),(E||e!==D())&&H(e)}var t=["text","search","url","tel","email","password","number","textarea"],n=[27,33,34,35,36,37,38,39,40,8,46],r="#ccc",i="placeholdersjs",s=new RegExp("(?:^|\\s)"+i+"(?!\\S)"),o,u,a="data-placeholder-value",f="data-placeholder-active",l="data-placeholder-type",c="data-placeholder-submit",h="data-placeholder-bound",p="data-placeholder-focus",d="data-placeholder-live",v="data-placeholder-maxlength",m=document.createElement("input"),g=document.getElementsByTagName("head")[0],y=document.documentElement,b=e.Placeholders,w=b.Utils,E,S,x,T,N,C,k,L,A,O,M;b.nativeSupport=m.placeholder!==void 0;if(!b.nativeSupport){o=document.getElementsByTagName("input"),u=document.getElementsByTagName("textarea"),E=y.getAttribute(p)==="false",S=y.getAttribute(d)!=="false",T=document.createElement("style"),T.type="text/css",N=document.createTextNode("."+i+" { color:"+r+"; }"),T.styleSheet?T.styleSheet.cssText=N.nodeValue:T.appendChild(N),g.insertBefore(T,g.firstChild);for(M=0,O=o.length+u.length;M<O;M++)A=M<o.length?o[M]:u[M-o.length],C=A.attributes.placeholder,C&&(C=C.nodeValue,C&&w.inArray(t,A.type)&&X(A));k=setInterval(function(){for(M=0,O=o.length+u.length;M<O;M++){A=M<o.length?o[M]:u[M-o.length],C=A.attributes.placeholder;if(C){C=C.nodeValue;if(C&&w.inArray(t,A.type)){A.getAttribute(h)||X(A);if(C!==A.getAttribute(a)||A.type==="password"&&!A.getAttribute(l))A.type==="password"&&!A.getAttribute(l)&&w.changeType(A,"text")&&A.setAttribute(l,"password"),A.value===A.getAttribute(a)&&(A.value=C),A.setAttribute(a,C)}}else A.getAttribute(f)&&(P(A),A.removeAttribute(a))}S||clearInterval(k)},100)}w.addEventListener(e,"beforeunload",function(){b.disable()}),b.disable=b.nativeSupport?_:j,b.enable=b.nativeSupport?_:F}(this),define("placeholders",function(){}),define("sf.b2c.mall.component.login.status.scanner",["jquery","can","underscore","store"],function(e,t,n,r){return t.Control.extend({init:function(e,t){this.userLogin=!1,this.insertScanner(),this.setScanner()},insertScanner:function(){e("#proxy").length==0&&e("body").append('<iframe id="proxy" src="http://www.sfht.com/proxy.html" style="display:none;"></iframe>')},setScanner:function(){window.postMessage?this.setPostMesageScanner():this.setWindowNameScanner()},setCsrfToken:function(e){if(e)try{var t=JSON.parse(e.data),n=r.get("csrfToken");n!=t.csrfToken&&r.set("csrfToken",t.csrfToken)}catch(i){throw i}},setPostMesageScanner:function(){window.onmessage=function(){if(event)try{var e=JSON.parse(event.data),t=r.get("csrfToken");t!=e.csrfToken&&r.set("csrfToken",e.csrfToken)}catch(n){throw n}}},setWindowNameScanner:function(){var t=this;this.handler=setInterval(function(){try{var i=e("#proxy").get(0)&&e("#proxy").get(0).contentWindow.name;i&&(r.set("csrfToken",i),this.userStatus!=1&&n.isFunction(t.options.changeStatus)&&t.options.changeStatus(!0))}catch(s){}},500)}})}),define("sf.b2c.mall.widget.modal",["jquery","underscore","can"],function(e,t,n){return n.Control.extend({init:function(e,t){this.modalid=(new Date).valueOf()},show:function(e){e=t.extend(e,{id:this.modalid});var r=n.view.mustache(e&&e.template||this.template());this.element.append(r(e||this.options)),this.element.find(".modal#"+this.modalid+" .mask").show()},hide:function(){this.element.find("#"+this.modalid).remove(),this.closed=!0},isClosed:function(){return this.closed},template:function(){return'<div class="modal" id="{{id}}"><div class="mask"></div><div class="register"><div class="register-h"><h2>{{title}}</h2><a href="#" class="btn btn-close">关闭</a><span class="icon icon34"></span><span class="icon icon35"></span></div><div class="">{{&html}}</div></div></div>'},".btn-close click":function(e,t){t&&t.preventDefault(),this.hide()},setTitle:function(e){this.element.find(".register-h h2").text(e)}})}),define("sf.b2c.mall.widget.not.support",["jquery","can"],function(e,t){return t.Control.extend({init:function(){(this.isIE(6)||this.isIE(7))&&this.render()},isIE:function(e){var t=document.createElement("b");return t.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->",t.getElementsByTagName("i").length===1},".btn-close click":function(t,n){e(".u-dialog-browser").remove(),e(".mask").remove()},render:function(){var e=t.view("templates/widget/sf.b2c.mall.widget.not.support.mustache",{});this.element.prepend(e)}})}),define("sf.util",["jquery","jquery.cookie","can","underscore","md5","store"],function(e,t,n,r,i,s){return n.route.ready(),{checkEmail:function(e){return/^([a-zA-Z0-9-_]*[-_\.]?[a-zA-Z0-9]+)*@([a-zA-Z0-9]*[-_]?[a-zA-Z0-9]+)+[\.][a-zA-Z]{2,3}([\.][a-zA-Z]{2})?$/.test(e)},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Firefox:function(){return navigator.userAgent.indexOf("Firefox")>-1},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()||this.Firefox()}},isLogin:function(){return e.cookie("ct")==1?!0:!1},namespace:function(e){var t=e.split("."),n=sf;for(var r=0;r<t.length;r++)n[t[r]]=n[t[r]]||{},n=n[t[r]];return n},access:function(e,t){if(e.stat.code===0&&e.content[0]&&e.stat.stateList[0].code===0)return!0;if(e.stat.code!=-180&&e.stat.code!=-360)return!1;if(t){var n=window.location.pathname;n!="/login.html"&&(window.location.href="/login.html")}},clean:function(e){return r.each(e,function(t,n,i){(r.isUndefined(t)||r.isNull(t))&&delete e[n]}),e},encrypt:function(e,t){r.each(e,function(t,n,i){r.isUndefined(t)&&delete e[n]});var n=[];r.each(e,function(e,t,r){n.push(t+"="+e)}),n.sort();var s=n.join("");return s+=t,i(s)},sign:function(e,t){var n=this,i={NONE:function(e,t){var n="sfhaitao.xyz!";return r.extend(e,{_sig:sf.util.encrypt(e,n)})},USERLOGIN:function(e,t){var i=s.get("csrfToken");if(i)return r.extend(e,{_sig:n.encrypt(e,i)});if(!t)return e;var o=window.location.pathname;o!="/login.html"&&(window.location.href="/login.html")}},o=i[e.level];if(r.isFunction(o)){var u=r.extend(e.data,{_aid:1,_sm:"md5"});return o(u)}return e.data}}}),define("sf.b2c.mall.component.header",["jquery","jquery.cookie","can","underscore","md5","store","sf.b2c.mall.component.login.status.scanner","sf.b2c.mall.framework.comm","sf.b2c.mall.api.user.getUserInfo","sf.b2c.mall.api.user.logout","sf.b2c.mall.widget.modal","sf.b2c.mall.business.config","sf.b2c.mall.widget.not.support","sf.util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=1;return n.Control.extend({defaults:{login:{myOrder:c.setting.link.orderlist},nologin:{myOrder:c.setting.link.login}},init:function(t,i){this.component={},this.component.modal=new l("body"),this.component.scanner=new o,this.component.notSupport=new h("body"),this.watchLoginState.call(this),this.afterLoginDest=null;if(u.prototype.checkUserLogin.call(this)){var s=e.cookie(d+"_uinfo"),a=[];s&&(a=s.split(",")),this.data=new n.Map(r.extend(this.defaults.login,{isUserLogin:!0,index:c.setting.link.index,nickname:a[0]}))}else this.data=new n.Map(r.extend(this.defaults.nologin,{isUserLogin:!1,index:c.setting.link.index,nickname:null}));this.render(this.data);if(this.options.isForceLogin){var f=this;u.prototype.checkUserLogin.call(f)||(window.location.href=c.setting.link.index)}},render:function(e){var t=n.view("templates/component/sf.b2c.mall.header.mustache",e);this.element.html(t)},"#user-setting click":function(e,t){t&&t.preventDefault()},"#user-orderlist click":function(e,t){t&&t.preventDefault(),u.prototype.checkUserLogin.call(this)?window.location.href=c.setting.link.orderlist+window.location.search+window.location.hash:this.showLogin("orderlist")},"#user-password-change click":function(e,t){t&&t.preventDefault(),u.prototype.checkUserLogin.call(this)?window.location.href=c.setting.link.passwordchange:this.showLogin("passwordchange")},"#user-center click":function(e,t){t&&t.preventDefault(),u.prototype.checkUserLogin.call(this)?window.location.href=c.setting.link.center:this.showLogin("center")},"#user-logout click":function(e,t){t&&t.preventDefault();var n=this;if(u.prototype.checkUserLogin.call(this)){var r=new f({});r.sendRequest().done(function(e){n.data.attr("user",null),s.remove("csrfToken"),setTimeout(function(){window.location.href=c.setting.link.index},2e3)}).fail(function(){})}},"#my-account click":function(e,t){t&&t.preventDefault()},"#user-login click":function(e,t){t&&t.preventDefault(),this.showLogin()},"#user-register click":function(e,t){t&&t.preventDefault(),this.showRegister()},showRegister:function(e){if(p.isMobile.any())return window.location.href=c.setting.link.iregister;e&&(this.afterLoginDest=e),this.component.modal.show({title:"登录顺丰海淘",html:'<iframe height="535px" width="100%" frameborder="no" seamless="" src="'+c.setting.link.register+'"></iframe>'})},showLogin:function(e){if(p.isMobile.any())return window.location.href=c.setting.link.ilogin;e&&(this.afterLoginDest=e),this.component.modal.show({title:"登录顺丰海淘",html:'<iframe height="535px" width="100%" frameborder="no" seamless="" src="'+c.setting.link.login+'"></iframe>'}),this.component.modal.setTitle("顺丰海淘")},watchLoginState:function(){var t=this;setInterval(function(){t.component.modal.isClosed()&&(t.afterLoginDest=null);if(u.prototype.checkUserLogin.call(t)){t.component.modal.isClosed()||t.component.modal.hide();if(t.afterLoginDest){var n=c.setting.link[t.afterLoginDest]||t.afterLoginDest;window.location.href=n}var r=e.cookie(d+"_uinfo"),i=[];r&&(i=r.split(",")),t.data.attr("isUserLogin",!0),t.data.attr("nickname",i[0])}else t.data.attr("isUserLogin",!1),t.data.attr("nickname",null)},500)}})}),define("sf.b2c.mall.component.footer",["can"],function(e){return e.Control.extend({init:function(t,n){var r=e.view("templates/component/sf.b2c.mall.footer.mustache")({});this.element.html(r)}})}),define("sf.b2c.mall.order.step",["can"],function(e){return e.Control.extend({init:function(t,n){var r=this.options.firststep,i=this.options.secondstep,s=this.options.thirdstep;this.data=new e.Map({firststep:r,secondstep:i,thirdstep:s});var o=e.view("templates/order/sf.b2c.mall.order.step.mustache",this.data);this.element.html(o)},setActive:function(e){var t=this,n={firststep:function(){t.data.attr("firststep","active"),t.data.attr("secondstep",""),t.data.attr("thirdstep","")},secondstep:function(){t.data.attr("firststep",""),t.data.attr("secondstep","active"),t.data.attr("thirdstep","")},thirdstep:function(){t.data.attr("firststep",""),t.data.attr("secondstep",""),t.data.attr("thirdstep","active")}};typeof n[e]!="undefined"&&n[e].call(this)}})}),define("sf.b2c.mall.adapter.order",["can"],function(e){return e.Map({format:function(e){var t=this;return _.each(e,function(e,n,r){t.attr(n,e)}),t}})}),define("sf.b2c.mall.adapter.receiveperson.list",["can"],function(e){return e.Map({init:function(e){this.attr("input",{recId:this.findDefaultPerson()})},findDefaultPerson:function(){if(this.personList){var e=this.personList.attr("0");return e&&e.addrId}},remove:function(e){this.personList.removeAttr(e)},get:function(e){return this.personList.attr(e)},length:function(){return this.personList.attr("length")}})}),define("sf.b2c.mall.widget.message",["jquery","can"],function(e,t){return t.Control.extend({init:function(e,t){this.data={},this.data.type=this.options.type,this.data.tip=this.options.tip,this.data.okFunction=typeof this.options.okFunction!="undefined"?this.options.okFunction:null,this.data.closeFunction=typeof this.options.closeFunction!="undefined"?this.options.closeFunction:null,this.data.buttons=this.buttonsMap[this.data.type],this.render()},render:function(){this.setup(e("body")),this.options.html=t.view("templates/widget/sf.b2c.mall.widget.message.mustache",this.data),e("body").append(this.options.html)},buttonsMap:{confirm:'<a href="javascript:void(0)" class="btn btn-send" id="ok">确定</a><a href="javascript:void(0)" class="btn btn-cancel" id="cancel">取消</a>',error:'<a href="javascript:void(0)" class="btn btn-send" id="ok">确定</a>',success:'<a href="javascript:void(0)" class="btn btn-send" id="ok">确定</a>'},"#close click":function(){return this.close(),!1},"#ok click":function(){return typeof this.data.okFunction!="undefined"&&this.data.okFunction!=null&&this.data.okFunction.apply(this),this.close(),!1},"#cancel click":function(){return typeof this.data.closeFunction!="undefined"&&this.data.closeFunction!=null&&this.data.closeFunction.apply(this),this.close(),!1},close:function(){e("#messagedialog").remove(),this.destroy()}})}),define("sf.b2c.mall.component.receivepersoneditor",["can","sf.b2c.mall.api.user.createReceiverInfo","sf.b2c.mall.api.user.updateReceiverInfo","sf.b2c.mall.widget.message","placeholders"],function(e,t,n,r,i){return e.Control.extend({init:function(){this.adapter={},this.onSuccess=this.options.onSuccess},idErrorMap:{1000200:"该身份证信息已存在！",1000280:"身份证号码错误！"},render:function(t,n,r){this.setup(r);var i=e.view("templates/component/sf.b2c.mall.component.receivepersoneditor.mustache",t);r.html(i)},show:function(t,n,r){var i={create:function(e){return{input:{recId:null,recName:null,type:"ID",credtNum:null},mainTitle:{text:"添加收货人信息"},cancle:{text:"取消添加"},error:{recName:null,credtNum:null}}},editor:function(e){return{input:{recId:e.recId,recName:e.recName,type:"ID",credtNum:e.credtNum},mainTitle:{text:"修改收货人信息"},cancle:{text:"取消修改"},error:{recName:null,credtNum:null}}}},s=i[t].call(this,n);this.adapter.person=new e.Map(s),this.render(this.adapter,t,r)},hide:function(){this.destroy()},"#center-add-address-cancel-btn click":function(e,t){t&&t.preventDefault(),this.element.empty()},add:function(n){var i=e.Deferred(),s=this,o=new t(n);return o.sendRequest().done(function(e){var t=new r(null,{tip:"新增收货人成功！",type:"success"});i.resolve(e),s.onSuccess(e)}).fail(function(e){e===1000310&&new r(null,{tip:"您已添加20条收货人信息，请返回修改！",type:"error"}),i.reject(e)}),i},update:function(t){var r=e.Deferred(),i=this,s=new n(t);return s.sendRequest().done(function(e){r.resolve(e),i.onSuccess()}).fail(function(e){r.reject(e)}),r},"#personSaveCancel click":function(e,t){return this.element.hide(),this.element.empty(),$("#btn-add-person").show(),!1},"#recRealName focus":function(e,t){t&&t.preventDefault(),$("#recnameerror").hide()},"#identity focus":function(e,t){t&&t.preventDefault(),$("#credtnumerror").hide()},"#personSave click":function(t,n){n&&n.preventDefault(),$("#recnameerror").hide(),$("#credtnumerror").hide();var r=this.adapter.person.input.attr(),i;for(i in r)r[i]=_.str.trim(r[i]);if(!r.recName)return this.adapter.person.attr("error",{recName:"请填写收货人姓名！"}),$("#recnameerror").show(),!1;var s=/^[\u4e00-\u9fa5]{0,10}$/.test($.trim(r.recName));if(!s)return this.adapter.person.attr("error",{recName:"请填写身份证上真实姓名"}),$("#recnameerror").show(),!1;if(!r.credtNum)return this.adapter.person.attr("error",{credtNum:"请填写收货人身份证号码！"}),$("#credtnumerror").show(),!1;if(r.credtNum.length<18||r.credtNum.length>18)return this.adapter.person.attr("error",{credtNum:"收货人身份证号码填写有误！"}),$("#credtnumerror").show(),!1;var o={},u=r.credtNum;if(u.length==18){var a=u.substring(6,10),f=u.substring(10,12),l=u.substring(12,14),c=u.substring(14,17),h=new Date(a,parseFloat(f)-1,parseFloat(l));if(h.getFullYear()!=parseFloat(a)||h.getMonth()!=parseFloat(f)-1||h.getDate()!=parseFloat(l))o.isTrue=!1;var p=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],d=[1,0,10,9,8,7,6,5,4,3,2],v=0,m=u.split("");m[17].toLowerCase()=="x"&&(m[17]=10);for(var g=0;g<17;g++)v+=p[g]*m[g];var g=v%11;m[17]!=d[g]?o.isTrue=!1:o.isTrue=!0,o.year=h.getFullYear(),o.month=h.getMonth()+1,o.day=h.getDate(),c%2==0?(o.isFemale=!0,o.isMale=!1):(o.isFemale=!1,o.isMale=!0)}if(!o.isTrue)return this.adapter.person.attr("error",{credtNum:"收货人身份证号码填写有误！"}),$("#credtnumerror").show(),!1;var y=this;if(r.recId){var b=this.update(r);b.done(function(e){t.parents("div#editPersonArea").toggle()}).fail(function(e){return y.idErrorMap[e]&&(y.adapter.person.attr("error",{credtNum:y.idErrorMap[e]}),$("#credtnumerror")[0].style.display="inline"),!1})}else{var w=e.deparam(window.location.search.substr(1));w.saleid=="heike_online"&&!_.isEmpty(w.orgCode)&&(r.partnerId="heike");var b=this.add(r);b.done(function(e){r.recId=e.value,t.parents("div#addPersonArea").toggle(),$("#btn-add-person").show()}).fail(function(e){return y.idErrorMap[e]&&(y.adapter.person.attr("error",{credtNum:y.idErrorMap[e]}),$("#credtnumerror").show()),!1})}}})}),define("sf.b2c.mall.order.selectreceiveperson",["can","md5","underscore","sf.b2c.mall.api.user.getIDCardUrlList","sf.b2c.mall.api.user.webLogin","sf.b2c.mall.api.user.createReceiverInfo","sf.b2c.mall.api.user.updateReceiverInfo","sf.b2c.mall.adapter.order","sf.b2c.mall.adapter.receiveperson.list","sf.b2c.mall.component.receivepersoneditor"],function(e,t,n,r,i,s,o,u,a,f){return e.Control.extend({init:function(e,t){this.adapter4List={},this.component={},this.component.getIDCardUrlList=new r,this.render(this.data)},render:function(t){var r=this;this.component.getIDCardUrlList.sendRequest().done(function(i){var s=e.deparam(window.location.search.substr(1)),o={heike_online:function(e,t){var r=n.findWhere(e,{recId:t});return r?[r]:[]}},u=!n.isEmpty(s.orgCode)&&o[s.saleid],l=null;n.isFunction(u)&&(l=u(i.items,t&&t.value)),r.adapter4List.persons=new a({personList:l||i.items||[],hasData:!1}),r.adapter4List.persons.personList!=null&&r.adapter4List.persons.personList.length>0&&(r.adapter4List.persons.attr("hasData",!0),r.adapter4List.persons.personList[0].attr("active","active"));var c=e.view("templates/order/sf.b2c.mall.order.selectrecperson.mustache",r.adapter4List.persons);r.element.html(c),r.component.personEditor=new f("#addPersonArea",{onSuccess:n.bind(r.render,r)})}).fail(function(e){})},getSelectedIDCard:function(){var e=$("#personList").find("li.active").eq(0).attr("data-index");return typeof e=="undefined"?!1:this.adapter4List.persons.get(e)},".order-edit click":function(e,t){this.clearActive(),e.parents("li").addClass("active");var n=e.data("index"),r=this.adapter4List.persons.get(n);this.adapter4List.persons.input.attr("recId",r.recId),$("#editPersonArea").hide(),$("#addPersonArea").hide();var i=e.parents("li[name='personEach']").find("#editPersonArea");return i.show(),this.component.personEditor.show("editor",r,$(i)),!1},".btn-add click":function(e,t){return $("#personlist").find(".order-r2").hide(),$("#editPersonArea").hide(),$("#addPersonArea").show(),$(e).hide(),this.component.personEditor.show("create",null,$("#addPersonArea")),!1},".icon30 click":function(e,t){return e.parents(".order-b").toggleClass("active"),e.parent("div").find(".order-r2").hide(),!1},"#personList click":function(e,t){if(event.srcElement.tagName=="SPAN")return this.clearActive(),$(event.srcElement).parents("li[name='personEach']").addClass("active"),!1},clearActive:function(){$("li[name='personEach']").removeClass("active"),$("#personlist").find(".order-r2").hide()}})}),define("sf.b2c.mall.adapter.address.list",["can"],function(e){return e.Map({init:function(e){this.attr("input",{addrId:this.findDefaultAddress()})},findDefaultAddress:function(){var e=this.addressList.attr("0");return e&&e.addrId},remove:function(e){this.addressList.removeAttr(e)},get:function(e){return this.addressList.attr(e)},length:function(){return this.addressList.attr("length")}})}),define("sf.b2c.mall.adapter.regions",["can"],function(e){return e.Map({findOne:function(e){var t=this.attr("cityList");return _.findWhere(t,{id:e})},findGroup:function(e){var t=this.attr("cityList");return _.filter(t,function(t,n,r){return t.superregion_id==e})},getIdByName:function(e){var t=this.cityList.attr(),n=_.findWhere(t,{name:e});return n.id},getIdBySuperreginIdAndName:function(e,t){var n=this.cityList.attr(),r=_.findWhere(n,{superregion_id:e,name:t});return r.id},getGroupByName:function(e){var t=this.getIdByName(e);return this.findGroup(t)},findOneName:function(e){if(e&&this.findOne(e)){var t=this.findOne(e);return t.name}}})}),define("sf.b2c.mall.component.addreditor",["can","sf.b2c.mall.adapter.regions","sf.b2c.mall.api.user.createRecAddress","sf.b2c.mall.api.user.updateRecAddress","placeholders","sf.b2c.mall.widget.message"],function(e,t,n,r,i,s){return e.Control.extend({init:function(){this.adapter={},this.request(),this.onSuccess=this.options.onSuccess},request:function(){var n=this;return e.ajax("json/sf.b2c.mall.regions.json").done(_.bind(function(e){this.adapter.regions=new t({cityList:e})},this)).fail(function(){})},render:function(t,n,r){this.setup(r);var i=e.view("templates/component/sf.b2c.mall.component.addreditor.mustache",t);r.html(i),this.supplement(n)},supplement:function(e){e=="create"&&(this.changeCity(),this.changeRegion())},show:function(e,t,n){var r=this;this.adapter.regions?r._show.call(r,e,t,n):this.request().then(function(){r._show.call(r,e,t,n)})},_show:function(t,n,r){var i={create:function(e){return{input:{addrId:null,nationName:"0",provinceName:this.adapter.regions.findGroup(0)[0].id,cityName:null,regionName:null,detail:null,recId:null,cellphone:null,zipCode:null},place:{countries:[{id:0,name:"中国"}],provinces:this.adapter.regions.findGroup(0),cities:null,regions:null},control:{add:!1},mainTitle:{text:"添加收货地址"},cancle:{text:"取消添加"},error:{detail:null,zipCode:null,cellphone:null}}},editor:function(e){var t=this.adapter.regions.getIdByName(e.provinceName),n=this.adapter.regions.getIdBySuperreginIdAndName(t,e.cityName);return{input:{addrId:e.addrId,nationName:0,provinceName:t,cityName:n,regionName:this.adapter.regions.getIdBySuperreginIdAndName(n,e.regionName),detail:e.detail,cellphone:e.cellphone,zipCode:e.zipCode,recId:e.recId},place:{countries:[{id:0,name:"中国"}],provinces:this.adapter.regions.findGroup(0),cities:this.adapter.regions.getGroupByName(e.provinceName),regions:this.adapter.regions.getGroupByName(e.cityName)},control:{add:!1},mainTitle:{text:"修改收货地址"},cancle:{text:"取消修改"},error:{detail:null,zipCode:null,cellphone:null}}}},s=i[t].call(this,n);this.adapter.addr=new e.Map(s),this.render(this.adapter,t,r)},hide:function(){this.destroy()},clearComponents:function(){this.component.idList&&this.component.idList.destroy(),this.component.idEditor&&this.component.idEditor.destroy()},changeCity:function(){var e=this.adapter.addr.input.attr("provinceName"),t=this.adapter.regions.findGroup(window.parseInt(e));this.adapter.addr.place.attr("cities",t),this.adapter.addr.input.attr("cityName",t[0].id)},changeRegion:function(){var e=this.adapter.addr.input.attr("cityName"),t=this.adapter.regions.findGroup(window.parseInt(e));this.adapter.addr.place.attr("regions",t),this.adapter.addr.input.attr("regionName",t[0].id)},"#s2 change":function(e,t){this.changeCity(),this.changeRegion()},"#s3 change":function(e,t){this.changeRegion()},"#center-add-address-cancel-btn click":function(e,t){t&&t.preventDefault(),this.element.empty()},add:function(t){var r=this;delete t.recId;var i=e.deparam(window.location.search.substr(1));i.saleid=="heike_online"&&!_.isEmpty(i.orgCode)&&(t.partnerId="heike");var o=new n(t);o.sendRequest().done(function(e){var t=new s(null,{tip:"新增收货地址成功！",type:"success"});return r.hide(),r.onSuccess(e),!0}).fail(function(e){return e===1000310&&new s(null,{title:"顺丰海淘",tip:"您已添加20条收货地址信息，请返回修改！",type:"error"}),!1})},update:function(e){var t=this,n=new r(e);n.sendRequest().done(function(n){var r=new s(null,{tip:"修改收货地址成功！",type:"success"});t.hide(),t.onSuccess({value:window.parseInt(e.addrId)})}).fail(function(e){})},"#paddressSaveCancel click":function(e,t){return this.element.hide(),this.element.empty(),$("#btn-add-addr").show(),!1},"#address focus":function(e,t){t&&t.preventDefault(),$("#detailerror").hide()},"#cellphone focus":function(e,t){t&&t.preventDefault(),$("#cellphoneerror").hide()},"#zipcode focus":function(e,t){t&&t.preventDefault(),$("#zipcodeerror").hide()},"#addressSave click":function(e,t){t&&t.preventDefault(),$(".tel-hide").hide();var n=this.adapter.addr.input.attr(),r;for(r in n)n[r]=_.str.trim(n[r]);n.nationName="中国",n.provinceName=this.adapter.regions.findOneName(window.parseInt(n.provinceName)),n.cityName=this.adapter.regions.findOneName(window.parseInt(n.cityName)),n.regionName=this.adapter.regions.findOneName(window.parseInt(n.regionName)),$("#detailerror").hide(),$("#cellphoneerror").hide(),$("#zipcodeerror").hide();if(!n.detail)return this.adapter.addr.attr("error",{detail:"请填写详细地址信息！"}),$("#detailerror").show(),!1;if(n.detail.length>120||n.detail.length<5)return this.adapter.addr.attr("error",{detail:"请输入正确地址信息!"}),$("#detailerror").show(),!1;if(!n.cellphone)return this.adapter.addr.attr("error",{cellphone:"请填写收货人手机号码！"}),$("#cellphoneerror").show(),!1;if(!/^1\d{10}$/.test(n.cellphone))return this.adapter.addr.attr("error",{cellphone:"收货人手机号码填写有误！"}),$("#cellphoneerror").show(),!1;if(!n.zipCode)return this.adapter.addr.attr("error",{zipCode:"请填写邮编！"}),$("#zipcodeerror").show(),!1;var i=/[0-9]\d{5}(?!\d)$/.test($.trim(n.zipCode));if(!i||n.zipCode.length>6)return this.adapter.addr.attr("error",{zipCode:"邮编填写有误！"}),$("#zipcodeerror").show(),!1;if(n.addrId)this.update(n),e.parents("div#editAdrArea").toggle();else{var s=this.add(n);s&&(e.parents("div#addAdrArea").toggle(),$("#btn-add-addr").show())}}})}),define("sf.b2c.mall.order.selectreceiveaddr",["can","sf.b2c.mall.api.user.getRecAddressList","sf.b2c.mall.adapter.address.list","sf.b2c.mall.component.addreditor","sf.b2c.mall.api.user.webLogin","md5"],function(e,t,n,r,i,s){return e.Control.extend({init:function(e,t){this.adapter4List={},this.component={},this.paint()},render:function(t){var n=e.view("templates/order/sf.b2c.mall.order.selectrecaddr.mustache",t);this.element.html(n)},paint:function(i){var s=this,o=new t;o.sendRequest().done(function(t){var o=e.deparam(window.location.search.substr(1)),u={heike_online:function(e,t){var n=_.findWhere(e,{addrId:t});return n?[n]:[]}},a=!_.isEmpty(o.orgCode)&&u[o.saleid],f=null;_.isFunction(a)&&(f=a(t.items,i&&i.value)),s.adapter4List.addrs=new n({addressList:f||t.items||[],hasData:!1}),s.adapter4List.addrs.addressList!=null&&s.adapter4List.addrs.addressList.length>0&&(s.adapter4List.addrs.addressList[0].attr("active","active"),s.adapter4List.addrs.attr("hasData",!0)),s.render(s.adapter4List.addrs),s.component.addressEditor=new r("#addAdrArea",{onSuccess:_.bind(s.paint,s)})}).fail(function(e){0})},getCityList:function(){return e.ajax("json/sf.b2c.mall.regions.json")},getSelectedAddr:function(){var e=$("#addrList").find("li.active").eq(0).attr("data-index");return typeof e=="undefined"?!1:this.adapter4List.addrs.get(e)},"#addSave click":function(e,t){return!1},".icon30 click":function(e,t){return e.parents(".order-b").toggleClass("active"),e.parent("div").find(".order-r2").hide(),!1},".order-edit click":function(e,t){var n=e.data("index"),r=this.adapter4List.addrs.get(n);this.adapter4List.addrs.input.attr("addrId",r.addrId);var i=e.parents("li[name='addrEach']").find("#editAdrArea");return this.component.addressEditor.show("editor",r,$(i)),this.clearActive(),e.parents("li").find(".order-r2").toggle(),e.parents("li").addClass("active"),!1},".btn-add click":function(e,t){return $("#addrList").find(".order-r2").hide(),$("#addAdrArea").show(),$(e).hide(),this.component.addressEditor.show("create",null,$("#addAdrArea")),!1},"#addrList click":function(e,t){if(event.srcElement.tagName=="SPAN")return this.clearActive(),$(event.srcElement).parents("li[name='addrEach']").addClass("active"),!1},clearActive:function(){$("li[name='addrEach']").removeClass("active"),$("#addrList").find(".order-r2").hide()}})}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Nt.call(e,t)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){bt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&0}function s(e,t){var n=!0;return h(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){gn[e]||(i(t),gn[e]=!0)}function u(e,t){return function(n){return v(e.call(this,n),t)}}function a(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function f(){}function l(e,t){t!==!1&&M(e),p(this,e),this._d=new Date(+e._d)}function c(e){var t=T(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*f+6e4*a+36e5*u,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=bt.localeData(),this._bubble()}function h(e,t){for(var r in t)n(t,r)&&(e[r]=t[r]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Pt.length>0)for(n in Pt)r=Pt[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function d(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function m(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=B(t,e),e.isBefore(t)?n=m(e,t):(n=m(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function y(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=bt.duration(n,r),b(this,i,e),this}}function b(e,t,n,r){var i=t._milliseconds,s=t._days,o=t._months;r=null==r?!0:r,i&&e._d.setTime(+e._d+i*n),s&&pt(e,"Date",ht(e,"Date")+s*n),o&&ct(e,ht(e,"Month")+o*n),r&&bt.updateOffset(e,s||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function E(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function S(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&C(e[r])!==C(t[r]))&&o++;return o+s}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ln[e]||cn[t]||t}return e}function T(e){var t,r,i={};for(r in e)n(e,r)&&(t=x(r),t&&(i[t]=e[r]));return i}function N(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}bt[t]=function(i,s){var o,u,a=bt._locale[t],f=[];if("number"==typeof i&&(s=i,i=e),u=function(e){var t=bt().utc().set(r,e);return a.call(bt._locale,t,i||"")},null!=s)return u(s);for(o=0;n>o;o++)f.push(u(o));return f}}function C(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function k(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function L(e,t,n){return ut(bt([e,11,31+t-n]),t,n).week}function A(e){return O(e)?366:365}function O(e){return e%4===0&&e%100!==0||e%400===0}function M(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[kt]<0||e._a[kt]>11?kt:e._a[Lt]<1||e._a[Lt]>k(e._a[Ct],e._a[kt])?Lt:e._a[At]<0||e._a[At]>24||24===e._a[At]&&(0!==e._a[Ot]||0!==e._a[Mt]||0!==e._a[_t])?At:e._a[Ot]<0||e._a[Ot]>59?Ot:e._a[Mt]<0||e._a[Mt]>59?Mt:e._a[_t]<0||e._a[_t]>999?_t:-1,e._pf._overflowDayOfYear&&(Ct>t||t>Lt)&&(t=Lt),e._pf.overflow=t)}function _(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function D(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){for(var t,n,r,i,s=0;s<e.length;){for(i=D(e[s]).split("-"),t=i.length,n=D(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=H(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&S(i,n,!0)>=t-1)break;t--}s++}return null}function H(e){var t=null;if(!Dt[e]&&Ht)try{t=bt.locale(),require("./locale/"+e),bt.locale(t)}catch(n){}return Dt[e]}function B(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(bt.isMoment(e)||E(e)?+e:+bt(e))- +n,n._d.setTime(+n._d+r),bt.updateOffset(n,!1),n):bt(e).local()}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function F(e){var t,n,r=e.match(It);for(t=0,n=r.length;n>t;t++)r[t]=mn[r[t]]?mn[r[t]]:j(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function I(e,t){return e.isValid()?(t=q(t,e.localeData()),hn[t]||(hn[t]=F(t)),hn[t](e)):e.localeData().invalidDate()}function q(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(qt.lastIndex=0;r>=0&&qt.test(e);)e=e.replace(qt,n),qt.lastIndex=0,r-=1;return e}function R(e,t){var n,r=t._strict;switch(e){case"Q":return Gt;case"DDDD":return Zt;case"YYYY":case"GGGG":case"gggg":return r?en:zt;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?tn:Wt;case"S":if(r)return Gt;case"SS":if(r)return Yt;case"SSS":if(r)return Zt;case"DDD":return Ut;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"x":return Kt;case"X":return Qt;case"Z":case"ZZ":return $t;case"T":return Jt;case"SSSS":return Xt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Yt:Rt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Rt;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Q(K(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match($t)||[],n=t[t.length-1]||[],r=(n+"").match(an)||["-",0,0],i=+(60*r[1])+C(r[2]);return"+"===r[0]?-i:i}function z(e,t,n){var r,i=n._a;switch(e){case"Q":null!=t&&(i[kt]=3*(C(t)-1));break;case"M":case"MM":null!=t&&(i[kt]=C(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),null!=r?i[kt]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[Lt]=C(t));break;case"Do":null!=t&&(i[Lt]=C(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=C(t));break;case"YY":i[Ct]=bt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Ct]=C(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[At]=C(t);break;case"m":case"mm":i[Ot]=C(t);break;case"s":case"ss":i[Mt]=C(t);break;case"S":case"SS":case"SSS":case"SSSS":i[_t]=C(1e3*("0."+t));break;case"x":n._d=new Date(C(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=U(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=C(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=bt.parseTwoDigitYear(t)}}function W(e){var n,r,i,s,o,u,a;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,u=4,r=t(n.GG,e._a[Ct],ut(bt(),1,4).year),i=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,r=t(n.gg,e._a[Ct],ut(bt(),o,u).year),i=t(n.w,1),null!=n.d?(s=n.d,o>s&&++i):s=null!=n.e?n.e+o:o),a=at(r,i,s,u,o),e._a[Ct]=a.year,e._dayOfYear=a.dayOfYear}function X(e){var n,r,i,s,o=[];if(!e._d){for(i=$(e),e._w&&null==e._a[Lt]&&null==e._a[kt]&&W(e),e._dayOfYear&&(s=t(e._a[Ct],i[Ct]),e._dayOfYear>A(s)&&(e._pf._overflowDayOfYear=!0),r=rt(s,0,e._dayOfYear),e._a[kt]=r.getUTCMonth(),e._a[Lt]=r.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=i[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[At]&&0===e._a[Ot]&&0===e._a[Mt]&&0===e._a[_t]&&(e._nextDay=!0,e._a[At]=0),e._d=(e._useUTC?rt:nt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[At]=24)}}function V(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],X(e))}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function J(t){if(t._f===bt.ISO_8601)return void Y(t);t._a=[],t._pf.empty=!0;var n,r,i,s,o,u=""+t._i,a=u.length,f=0;for(i=q(t._f,t._locale).match(It)||[],n=0;n<i.length;n++)s=i[n],r=(u.match(R(s,t))||[])[0],r&&(o=u.substr(0,u.indexOf(r)),o.length>0&&t._pf.unusedInput.push(o),u=u.slice(u.indexOf(r)+r.length),f+=r.length),mn[s]?(r?t._pf.empty=!1:t._pf.unusedTokens.push(s),z(s,r,t)):t._strict&&!r&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=a-f,u.length>0&&t._pf.unusedInput.push(u),t._pf.bigHour===!0&&t._a[At]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[At]<12&&(t._a[At]+=12),t._isPm===!1&&12===t._a[At]&&(t._a[At]=0),X(t),M(t)}function K(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(e){var t,n,i,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void (e._d=new Date(0/0));for(s=0;s<e._f.length;s++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[s],J(t),_(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||i>o)&&(i=o,n=t));h(e,n||t)}function Y(e){var t,n,r=e._i,i=rn.exec(r);if(i){for(e._pf.iso=!0,t=0,n=on.length;n>t;t++)if(on[t][1].exec(r)){e._f=on[t][0]+(i[6]||" ");break}for(t=0,n=un.length;n>t;t++)if(un[t][1].exec(r)){e._f+=un[t][0];break}r.match($t)&&(e._f+="Z"),J(e)}else e._isValid=!1}function Z(e){Y(e),e._isValid===!1&&(delete e._isValid,bt.createFromInputFallback(e))}function et(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function tt(t){var n,r=t._i;r===e?t._d=new Date:E(r)?t._d=new Date(+r):null!==(n=Bt.exec(r))?t._d=new Date(+n[1]):"string"==typeof r?Z(t):w(r)?(t._a=et(r.slice(0),function(e){return parseInt(e,10)}),X(t)):"object"==typeof r?V(t):"number"==typeof r?t._d=new Date(r):bt.createFromInputFallback(t)}function nt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function st(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ot(e,t,n){var r=bt.duration(e).abs(),i=Tt(r.as("s")),s=Tt(r.as("m")),o=Tt(r.as("h")),u=Tt(r.as("d")),a=Tt(r.as("M")),f=Tt(r.as("y")),l=i<pn.s&&["s",i]||1===s&&["m"]||s<pn.m&&["mm",s]||1===o&&["h"]||o<pn.h&&["hh",o]||1===u&&["d"]||u<pn.d&&["dd",u]||1===a&&["M"]||a<pn.M&&["MM",a]||1===f&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,st.apply({},l)}function ut(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=bt(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function at(e,t,n,r,i){var s,o,u=rt(e,0,1).getUTCDay();return u=0===u?7:u,n=null!=n?n:i,s=i-u+(u>r?7:0)-(i>u?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:A(e-1)+o}}function ft(t){var n,r=t._i,i=t._f;return t._locale=t._locale||bt.localeData(t._l),null===r||i===e&&""===r?bt.invalid({nullInput:!0}):("string"==typeof r&&(t._i=r=t._locale.preparse(r)),bt.isMoment(r)?new l(r,!0):(i?w(i)?G(t):J(t):tt(t),n=new l(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function lt(e,t){var n,r;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function ct(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),k(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ht(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,n){return"Month"===t?ct(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function dt(e,t){return function(n){return null!=n?(pt(this,e,n),bt.updateOffset(this,t),this):ht(this,e)}}function vt(e){return 400*e/146097}function mt(e){return 146097*e/400}function gt(e){bt.duration.fn[e]=function(){return this._data[e]}}function yt(e){"undefined"==typeof ender&&(wt=xt.moment,xt.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bt):bt)}for(var bt,wt,Et,St="2.8.4",xt="undefined"!=typeof global?global:this,Tt=Math.round,Nt=Object.prototype.hasOwnProperty,Ct=0,kt=1,Lt=2,At=3,Ot=4,Mt=5,_t=6,Dt={},Pt=[],Ht="undefined"!=typeof module&&module&&module.exports,Bt=/^\/?Date\((\-?\d+)/i,jt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ft=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,It=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,qt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rt=/\d\d?/,Ut=/\d{1,3}/,zt=/\d{1,4}/,Wt=/[+\-]?\d{1,6}/,Xt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,Jt=/T/i,Kt=/[\+\-]?\d+/,Qt=/[\+\-]?\d+(\.\d{1,3})?/,Gt=/\d/,Yt=/\d\d/,Zt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sn="YYYY-MM-DDTHH:mm:ssZ",on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],un=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],an=/([\+\-]|\d\d)/gi,fn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ln={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},cn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hn={},pn={s:45,m:45,h:22,d:26,M:11},dn="DDD w W M D d".split(" "),vn="M D H h m s w W".split(" "),mn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return v(C(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(C(e/60),2)+":"+v(C(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(C(e/60),2)+v(C(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gn={},yn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dn.length;)Et=dn.pop(),mn[Et+"o"]=a(mn[Et],Et);for(;vn.length;)Et=vn.pop(),mn[Et+Et]=u(mn[Et],2);mn.DDDD=u(mn.DDD,3),h(f.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,i,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=bt.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=bt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ut(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bt=function(t,n,i,s){var o;return"boolean"==typeof i&&(s=i,i=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=i,o._strict=s,o._isUTC=!1,o._pf=r(),ft(o)},bt.suppressDeprecationWarnings=!1,bt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),bt.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)},bt.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)},bt.utc=function(t,n,i,s){var o;return"boolean"==typeof i&&(s=i,i=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=i,o._i=t,o._f=n,o._strict=s,o._pf=r(),ft(o).utc()},bt.unix=function(e){return bt(1e3*e)},bt.duration=function(e,t){var r,i,s,o,u=e,a=null;return bt.isDuration(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(u={},t?u[t]=e:u.milliseconds=e):(a=jt.exec(e))?(r="-"===a[1]?-1:1,u={y:0,d:C(a[Lt])*r,h:C(a[At])*r,m:C(a[Ot])*r,s:C(a[Mt])*r,ms:C(a[_t])*r}):(a=Ft.exec(e))?(r="-"===a[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r},u={y:s(a[2]),M:s(a[3]),d:s(a[4]),h:s(a[5]),m:s(a[6]),s:s(a[7]),w:s(a[8])}):"object"==typeof u&&("from"in u||"to"in u)&&(o=g(bt(u.from),bt(u.to)),u={},u.ms=o.milliseconds,u.M=o.months),i=new c(u),bt.isDuration(e)&&n(e,"_locale")&&(i._locale=e._locale),i},bt.version=St,bt.defaultFormat=sn,bt.ISO_8601=function(){},bt.momentProperties=Pt,bt.updateOffset=function(){},bt.relativeTimeThreshold=function(t,n){return pn[t]===e?!1:n===e?pn[t]:(pn[t]=n,!0)},bt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return bt.locale(e,t)}),bt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?bt.defineLocale(e,t):bt.localeData(e),n&&(bt.duration._locale=bt._locale=n)),bt._locale._abbr},bt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Dt[e]||(Dt[e]=new f),Dt[e].set(t),bt.locale(e),Dt[e]):(delete Dt[e],null)},bt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return bt.localeData(e)}),bt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return bt._locale;if(!w(e)){if(t=H(e))return t;e=[e]}return P(e)},bt.isMoment=function(e){return e instanceof l||null!=e&&n(e,"_isAMomentObject")},bt.isDuration=function(e){return e instanceof c};for(Et=yn.length-1;Et>=0;--Et)N(yn[Et]);bt.normalizeUnits=function(e){return x(e)},bt.invalid=function(e){var t=bt.utc(0/0);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},bt.parseZone=function(){return bt.apply(null,arguments).parseZone()},bt.parseTwoDigitYear=function(e){return C(e)+(C(e)>68?1900:2e3)},h(bt.fn=l.prototype,{clone:function(){return bt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=bt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():I(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return _(this)},isDSTShifted:function(){return this._a?this.isValid()&&S(this._a,(this._isUTC?bt.utc(this._a):bt(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=I(this,e||bt.defaultFormat);return this.localeData().postformat(t)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(e,t,n){var r,i,s,o=B(e,this),u=6e4*(this.zone()-o.zone());return t=x(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+o.daysInMonth()),i=12*(this.year()-o.year())+(this.month()-o.month()),s=this-bt(this).startOf("month")-(o-bt(o).startOf("month")),s-=6e4*(this.zone()-bt(this).startOf("month").zone()-(o.zone()-bt(o).startOf("month").zone())),i+=s/r,"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-u)/864e5:"week"===t?(r-u)/6048e5:r),n?i:d(i)},from:function(e,t){return bt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(bt(),e)},calendar:function(e){var t=e||bt(),n=B(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,bt(t)))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=it(e,this.localeData()),this.add(e-t,"d")):t},month:dt("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this>+e):(n=bt.isMoment(e)?+e:+bt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+e>+this):(n=bt.isMoment(e)?+e:+bt(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=x(t||"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this===+e):(n=+bt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,r=this._offset||0;return null==e?this._isUTC?r:this._dateTzOffset():("string"==typeof e&&(e=U(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==e&&(!t||this._changeInProgress?b(this,bt.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?bt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return k(this.year(),this.month())},dayOfYear:function(e){var t=Tt((bt(this).startOf("day")-bt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ut(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ut(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return L(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return L(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){return e=x(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=bt.localeData(t),null!=n&&(this._locale=n),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),bt.fn.millisecond=bt.fn.milliseconds=dt("Milliseconds",!1),bt.fn.second=bt.fn.seconds=dt("Seconds",!1),bt.fn.minute=bt.fn.minutes=dt("Minutes",!1),bt.fn.hour=bt.fn.hours=dt("Hours",!0),bt.fn.date=dt("Date",!0),bt.fn.dates=s("dates accessor is deprecated. Use date instead.",dt("Date",!0)),bt.fn.year=dt("FullYear",!0),bt.fn.years=s("years accessor is deprecated. Use year instead.",dt("FullYear",!0)),bt.fn.days=bt.fn.day,bt.fn.months=bt.fn.month,bt.fn.weeks=bt.fn.week,bt.fn.isoWeeks=bt.fn.isoWeek,bt.fn.quarters=bt.fn.quarter,bt.fn.toJSON=bt.fn.toISOString,h(bt.duration.fn=c.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,i=this._days,s=this._months,o=this._data,u=0;o.milliseconds=r%1e3,e=d(r/1e3),o.seconds=e%60,t=d(e/60),o.minutes=t%60,n=d(t/60),o.hours=n%24,i+=d(n/24),u=d(vt(i)),i-=d(mt(u)),s+=d(i/30),i%=30,u+=d(s/12),s%=12,o.days=i,o.months=s,o.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12)},humanize:function(e){var t=ot(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=bt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=bt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*vt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(mt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:bt.fn.lang,locale:bt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),bt.duration.fn.toString=bt.duration.fn.toISOString;for(Et in fn)n(fn,Et)&&gt(Et.toLowerCase());bt.duration.fn.asMilliseconds=function(){return this.as("ms")},bt.duration.fn.asSeconds=function(){return this.as("s")},bt.duration.fn.asMinutes=function(){return this.as("m")},bt.duration.fn.asHours=function(){return this.as("h")},bt.duration.fn.asDays=function(){return this.as("d")},bt.duration.fn.asWeeks=function(){return this.as("weeks")},bt.duration.fn.asMonths=function(){return this.as("M")},bt.duration.fn.asYears=function(){return this.as("y")},bt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ht?module.exports=bt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=wt),bt}),yt(!0)):yt()}.call(this),define("sf.helpers",["jquery","jquery.cookie","can","underscore","md5","moment"],function(e,t,n,r,i,s){n.Mustache.registerHelper("sf.toggle",function(e){return function(t){new Toggle(t,{value:e})}}),n.Mustache.registerHelper("sf.time",function(e){return r.isFunction(e)&&(e=e()),s(e).format("YYYY-MM-DD HH:mm:ss")}),n.Mustache.registerHelper("sf.price",function(e){var t=function(t){r.isFunction(t)&&(e=t())};while(r.isFunction(e))t(e);return(e/100).toString()}),n.Mustache.registerHelper("sf.img",function(e,t){r.isFunction(e)&&(e=e());var n=[];r.isString(e)?n=e.split(","):r.isArray(e)&&(n=e);var i=r.str.include(n[0],"http://");return i?n[0]:"http://img0.sfht.com/"+n[0]})}),define("sf.b2c.mall.order.iteminfo",["can","sf.b2c.mall.api.b2cmall.getProductHotData","sf.b2c.mall.api.b2cmall.getItemSummary","sf.b2c.mall.api.order.submitOrderForAllSys","sf.b2c.mall.api.user.getRecAddressList","sf.b2c.mall.api.user.getIDCardUrlList","sf.helpers","sf.b2c.mall.api.user.setDefaultAddr","sf.b2c.mall.api.user.setDefaultRecv","sf.b2c.mall.widget.message"],function(e,t,n,r,i,s,o,u,a,f){return e.Control.extend({init:function(r,i){var s=this,o=e.deparam(window.location.search.substr(1));s.options.itemid=o.itemid,s.options.saleid=o.saleid,s.options.amount=o.amount;var u=new n({itemId:this.options.itemid}),a=new t({itemId:this.options.itemid});e.when(u.sendRequest(),a.sendRequest()).done(function(t,n){var r={};r.singlePrice=n.sellingPrice,r.amount=s.options.amount,r.totalPrice=n.sellingPrice*s.options.amount,r.allTotalPrice=r.totalPrice,r.shouldPay=r.totalPrice,r.showTax=t.bonded,r.itemName=t.title,typeof t.image!="undefined"&&(r.picUrl=t.image.thumbImgUrl);if(typeof t.specs!="undefined"){var i=new Array;_.each(t.specs,function(e){i.push(e.specName+":"+e.spec.specValue)}),r.spec=i.join("&nbsp;/&nbsp;")}s.options.allTotalPrice=r.allTotalPrice,s.options.sellingPrice=n.sellingPrice;var o=e.view("templates/order/sf.b2c.mall.order.iteminfo.mustache",r);s.element.html(o)}).fail(function(e){})},errorMap:{4000200:"订单地址不存在",4000400:"订单商品信息改变",4000500:"订单商品库存不足",4000600:"订单商品超过限额",4000700:"订单商品金额改变"},getSysType:function(e){var t="b2c",n={heike_online:"HEIKE_ONLINE"};return n[e]||t},getSysInfo:function(){var e={heike_online:this.options.vendorinfo.get}},"#submitOrder click":function(t,n){var i=this;if(t.hasClass("disable"))return!1;t.addClass("disable");var s=i.options.selectReceivePerson.getSelectedIDCard(),o=i.options.selectReceiveAddr.getSelectedAddr();if(typeof s=="undefined"||s===!1)return new f(null,{tip:"请选择收货人！",type:"error"}),t.removeClass("disable"),!1;if(typeof o=="undefined"||o==0)return new f(null,{tip:"请选择收货地址！",type:"error"}),t.removeClass("disable"),!1;var l=new a({recId:s.recId}),c=new u({addrId:o.addrId}),h={};e.when(c.sendRequest(),l.sendRequest()).done(function(e,t){h={addressId:JSON.stringify({addrId:o.addrId,nationName:o.nationName,provinceName:o.provinceName,cityName:o.cityName,regionName:o.regionName,detail:o.detail,recName:s.recName,mobile:o.cellphone,telephone:o.cellphone,zipCode:o.zipCode,recId:s.recId}),userMsg:"",items:JSON.stringify([{itemId:i.options.itemid,num:i.options.amount,price:i.options.sellingPrice}]),sysType:i.getSysType(i.options.saleid),sysInfo:i.options.vendorinfo.getVendorInfo(i.options.saleid)}}).fail(function(e){t.removeClass("disable")}).then(function(){var e=new r(h);return e.sendRequest()}).done(function(e){window.location.href="gotopay.html?"+$.param({orderid:e.value,recid:s.recId})}).fail(function(e){t.removeClass("disable"),new f(null,{tip:i.errorMap[e]||"下单失败",type:"error"})})}})}),define("sf.b2c.mall.adapter.pagination",["can"],function(e){return e.Map({calc:function(e){var t=[],n=[],r=!1,i=e.pageNum,s=Math.ceil(e.totalNum/e.pageSize);if(s<7){for(var o=s;o>0;o--)t.push(o);t.reverse(),n=null,r=!1}else i<3||i>s-2?(t=[1,2,3],n=[s-2,s-1,s],r=!0):i<s/2?(t=[i-1,i,i+1],n=[s-2,s-1,s],r=!0):(t=[1,2,3],n=[i-1,i,i+1],r=!0);return{all:s,sarr:t,larr:n,requireMore:r,current:e.pageNum}},format:function(e){var t=this.calc(e);this.attr("all",t.all),this.attr("sarr",t.sarr),this.attr("larr",t.larr),this.attr("requireMore",t.requireMore),this.attr("current",t.current)}})}),define("sf.b2c.mall.widget.pagination",["can"],function(e){return e.Control.extend({init:function(e,t){this.paint()},paint:function(){this.render(this.options.page)},helpers:{equal:function(e,t){if(e()===t)return"on"}},jump:function(t){t>0&&t<this.options.page.all+1&&(_.isFunction(this.callback)&&this.callback({page:t}),e.route.attr({page:t}))},".pagination-set-page click":function(t,n){n&&n.preventDefault(),document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body&&(document.body.scrollTop=0);var r=e.$(t).attr("data-target");this.jump(r)},".pagination-prev click":function(e,t){t&&t.preventDefault(),document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body&&(document.body.scrollTop=0);var n=this.options.page.current-1;this.jump(n)},".pagination-next click":function(e,t){t&&t.preventDefault(),document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop=0:document.body&&(document.body.scrollTop=0);var n=this.options.page.current+1;this.jump(n)},render:function(t){var n=e.view("templates/widget/sf.b2c.mall.pagination.mustache",t,this.helpers);this.element.html(n)}})}),define("sf.b2c.mall.order.fn",["jquery","can","underscore","sf.b2c.mall.api.order.requestPayV2"],function(e,t,n,r){var i=new r;return{payV2:function(e,t){i.setData({orderId:e.orderid,payType:"alipay"}),i.sendRequest().done(function(e){window.location.href=e.url+"?"+e.postBody,t&&n.isFunction(t.success)&&t.success()}).fail(function(e){t&&n.isFunction(t.error)&&t.error()})}}}),define("sf.b2c.mall.order.orderlistcontent",["can","sf.b2c.mall.api.order.getOrderList","sf.b2c.mall.adapter.pagination","sf.b2c.mall.widget.pagination","sf.b2c.mall.api.order.getOrder","sf.helpers","sf.b2c.mall.api.order.cancelOrder","sf.b2c.mall.api.order.requestPayV2","sf.b2c.mall.api.order.confirmReceive","sf.b2c.mall.order.fn","sf.b2c.mall.api.sc.getUserRoutes","sf.b2c.mall.widget.message"],function(e,t,n,r,i,s,o,u,a,f,l,c){return e.Control.extend({init:function(e,t){this.render()},render:function(n){var r=this,i={query:JSON.stringify({status:null,receiverName:r.options.searchValue,orderId:r.options.searchValue,pageNum:1,pageSize:100})},s=new t(i);s.sendRequest().done(function(t){if(t.orders){r.options.orderlist=t.orders,_.each(r.options.orderlist,function(e){typeof e.orderGoodsItemList[0]!="undefined"&&(e.goodsName=e.orderGoodsItemList[0].goodsName,e.orderGoodsItemList[0].imageUrl==""||null==e.orderGoodsItemList[0].imageUrl?e.imageUrl="http://www.sfht.com/img/no.png":e.imageUrl=JSON.parse(e.orderGoodsItemList[0].imageUrl)[0],typeof e.orderGoodsItemList[0].spec!="undefined"&&(e.spec=e.orderGoodsItemList[0].spec.split(",").join("&nbsp;/&nbsp;")),e.optionHMTL=r.getOptionHTML(r.optionMap[e.orderStatus]),e.showRouter=r.routeMap[e.orderStatus],e.orderStatus=r.statsMap[e.orderStatus],e.needUploadIDCardHTML=r.uploadIDCardTemplateMap[e.rcvrState])});var n=e.view("templates/order/detailsf.b2c.mall.order.orderlist.mustache",r.options);r.element.html(n)}else{var i={};r.options.searchValue==null?i=e.view.mustache(r.noDataTemplate()):i=e.view.mustache(r.queryNoDataTemplate()),r.element.html(i())}}).fail(function(e){0})},uploadIDCardTemplateMap:{0:'<div class="table-1-upload"><span class="icon icon26">上传身份证照片</span><div class="tooltip"><h4>请在“查看订单”中上传身份照片</h4><h5>为什么要传身份证？</h5><p>由于国家政策规定，您在购买海外商品时，在物流及海关清关过程中需要出示购买人的身份证复印件。</p><span class="icon icon16-3"><span class="icon icon16-4"></span></span></div></div>'},noDataTemplate:function(){return'<div class="table table-1"><div class="table-h clearfix"><div class="table-c1 fl">订单信息</div><div class="table-c2 fl">收货人</div><div class="table-c3 fl">订单金额</div><div class="table-c4 fl">订单状态</div><div class="table-c5 fl">操作</div></div><p class="table-none">您暂时没有订单哦~赶快去逛逛吧~~<a href="http://www.sfht.com/index.html">去首页</a></p></div>'},queryNoDataTemplate:function(){return'<div class="table table-1"><div class="table-h clearfix"><div class="table-c1 fl">订单信息</div><div class="table-c2 fl">收货人</div><div class="table-c3 fl">订单金额</div><div class="table-c4 fl">订单状态</div><div class="table-c5 fl">操作</div></div><p class="table-none">未找到相关订单记录哟！<a href="http://www.sfht.com/orderlist.html">查看全部订单</a></p></div>'},".table-1-logistics mouseover":function(t,n){n&&n.preventDefault();var r=this;t.find(".tooltip").show();var i=new l({bizId:$(t).eq(0).attr("data-orderid")});return i.sendRequest().done(function(n){if(n.value){r.options.userRoutes=n.value;var i={};i.userRoutes=[],_.each(r.options.userRoutes,function(e){typeof e.carrierCode!="undefined"&&e.carrierCode=="SF"&&i.userRoutes.push(e)});var s=i.userRoutes.length;s<=5?i.userRoutes=i.userRoutes.reverse():i.userRoutes=i.userRoutes.slice(s-5,s).reverse();var o=e.view.mustache(r.getTraceListTemplate());t.find("#traceList").html(o(i))}}).fail(function(e){0}),!1},".table-1-logistics mouseout":function(e,t){return e.find(".tooltip").hide(),!1},getTraceListTemplate:function(){return'<h4>物流跟踪</h4><ul>{{#each userRoutes}}<li><div class="time fl">{{sf.time eventTime}}</div><div class="tooltip-c2">{{position}} {{remark}}</div>{{/each}}</ul><a id="find-more-info" href="#">查看全部</a><span class="icon icon16-3"><span class="icon icon16-4"></span></span>'},getOptionHTML:function(e){var t=this,n=[];return _.each(e,function(e){t.optionHTML[e]&&n.push(t.optionHTML[e])}),n.join("")},routeMap:{SUBMITED:!1,AUTO_CANCEL:!1,USER_CANCEL:!1,AUDITING:!1,OPERATION_CANCEL:!1,BUYING:!1,BUYING_EXCEPTION:!1,WAIT_SHIPPING:!1,SHIPPING:!1,LOGISTICS_EXCEPTION:!1,SHIPPED:!0,COMPLETED:!0,AUTO_COMPLETED:!0},optionMap:{SUBMITED:["NEEDPAY","INFO","CANCEL"],AUTO_CANCEL:["INFO"],USER_CANCEL:["INFO"],AUDITING:["INFO","CANCEL"],OPERATION_CANCEL:["INFO"],BUYING:["INFO"],BUYING_EXCEPTION:["INFO"],WAIT_SHIPPING:["INFO"],SHIPPING:["INFO","ROUTE"],LOGISTICS_EXCEPTION:["INFO","ROUTE"],SHIPPED:["INFO","ROUTE","RECEIVED"],COMPLETED:["INFO","ROUTE"],AUTO_COMPLETED:["INFO","ROUTE"]},optionHTML:{NEEDPAY:'<a href="#" class="btn btn-send gotoPay">立即支付</a>',INFO:'<a href="#" class="btn btn-add viewOrder">查看订单</a>',CANCEL:'<a href="#" class="link cancelOrder">取消订单</a>',RECEIVED:'<a href="#" class="btn btn-send received">确认签收</a>'},".received click":function(e,t){var n=this,r=new c(null,{tip:"确认要签收该订单？",type:"confirm",okFunction:_.bind(n.received,n,e)});return!1},received:function(e){var t=this,n=e.parent("div#operationarea").eq(0).attr("data-suborderid"),r=new a({subOrderId:n});r.sendRequest().done(function(e){var n=new c(null,{tip:"确认签收成功！",type:"success"});t.render()}).fail(function(e){var t=new c(null,{tip:"确认签收失败！",type:"error"})})},".gotoPay click":function(e,t){t&&t.preventDefault();var n=this,r=e.parent("div#operationarea").eq(0).attr("data-orderid"),i={error:function(){var e=new c(null,{tip:"支付失败！",type:"error",okFunction:function(){n.render()}})}};return f.payV2({orderid:r},i),!1},".viewOrder click":function(t,n){var r=t.parent("div#operationarea").eq(0).attr("data-orderid"),i=t.parent("div#operationarea").eq(0).attr("data-suborderid"),s=t.parent("div#operationarea").eq(0).attr("data-recid"),o=e.deparam(window.location.search.substr(1));o.saleid=="heike_online"?window.location.href="/orderdetail.html?orderid="+r+"&suborderid="+i+"&recid="+s:window.open("/orderdetail.html?orderid="+r+"&suborderid="+i+"&recid="+s,"_blank")},"#find-more-info click":function(e,t){var n=e.parent("#traceList").parent(".table-1-logistics").attr("data-orderid"),r=e.parent("#traceList").parent(".table-1-logistics").attr("data-suborderid"),i=e.parent("#traceList").parent(".table-1-logistics").parent(".table-c4").siblings("#operationarea").attr("data-recid");window.open("/orderdetail.html?orderid="+n+"&suborderid="+r+"&recid="+i,"_blank")},".cancelOrder click":function(e,t){var n=this,r=new c(null,{tip:"确认要取消该订单？",type:"confirm",okFunction:_.bind(n.cancelOrder,n,e)});return!1},cancelOrder:function(e){var t=this,n=e.parent("div#operationarea").eq(0).attr("data-orderid"),r=new o({orderId:n});r.sendRequest().done(function(e){new c(null,{tip:"订单取消成功！",type:"success"}),t.render()}).fail(function(e){new c(null,{tip:"订单取消失败！",type:"error"})})},errorMap:{4000800:"订单状态不能取消！"},receiveDErrorMap:{4000900:"子订单状态不符合确认操作！"},statsMap:{SUBMITED:"已提交",AUTO_CANCEL:"自动取消",USER_CANCEL:"用户取消",AUDITING:"待审核",OPERATION_CANCEL:"运营取消",BUYING:"采购中",BUYING_EXCEPTION:"采购异常",WAIT_SHIPPING:"待发货",SHIPPING:"正在出库",LOGISTICS_EXCEPTION:"物流异常",SHIPPED:"已发货",COMPLETED:"已完成",AUTO_COMPLETED:"自动完成"}})}),define("sf.b2c.mall.page.orderlist",["can","jquery","sf.b2c.mall.framework.comm","sf.b2c.mall.component.header","sf.b2c.mall.component.footer","sf.b2c.mall.order.orderlistcontent"],function(e,t,n,r,i,s){n.register(1);var o=e.Control.extend({init:function(e,t){this.render()},render:function(){new r(".sf-b2c-mall-header",{isForceLogin:!0}),new i(".sf-b2c-mall-footer");var n=e.view.mustache(this.searchTemplate());t(".sf-b2c-mall-order-orderlist-searcharea").html(n()),this.orderListComponent=new s(".sf-b2c-mall-order-orderlist",{searchValue:null})},searchTemplate:function(){return'<div class="orderlist-h clearfix"><div class="orderlist-hc1 fl"><h2>温馨提示：</h2><p>顺丰海淘未付款订单超过2小时将被自动取消，提交订单请尽快完成支付。</p></div><div class="orderlist-hc2 fr"><input type="text" class="input" placeholder="输入订单号/收货人" id="searchValue"/><a href="#" class="btn btn-buy" id="search">搜索</a></div></div>'},"{document} keydown":function(e,t){var n=t||window.event,r=n.keyCode||n.which||n.charCode;if(r===13)return this.search()},search:function(){this.orderListComponent&&this.orderListComponent.destroy();var e=_.str.trim(t("#searchValue")[0].value);_.str.isBlank(e)&&(e=null);if(null!=e&&e.length>20)return alert("搜索关键词太长，请小于20个字符！"),!1;this.orderListComponent=new s(".sf-b2c-mall-order-orderlist",{searchValue:e})},"#search click":function(e,t){return this.search()}});new o("#orderList")}),require(["sf.b2c.mall.page.orderlist"]);