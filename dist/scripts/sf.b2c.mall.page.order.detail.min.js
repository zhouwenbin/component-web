(function(e){function t(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent)return e.attachEvent("on"+t,n)}function n(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function r(e,t){var n;e.createTextRange?(n=e.createTextRange(),n.move("character",t),n.select()):e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function i(e,t){try{return e.type=t,!0}catch(n){return!1}}e.Placeholders={Utils:{addEventListener:t,inArray:n,moveCaret:r,changeType:i}}})(this),function(e){function _(){}function D(){try{return document.activeElement}catch(e){}}function P(e,t){var n,r,i=!!t&&e.value!==t,o=e.value===e.getAttribute(a);return(i||o)&&e.getAttribute(f)==="true"?(e.removeAttribute(f),e.value=e.value.replace(e.getAttribute(a),""),e.className=e.className.replace(s,""),r=e.getAttribute(v),parseInt(r,10)>=0&&(e.setAttribute("maxLength",r),e.removeAttribute(v)),n=e.getAttribute(l),n&&(e.type=n),!0):!1}function H(e){var t,n,r=e.getAttribute(a);return e.value===""&&r?(e.setAttribute(f,"true"),e.value=r,e.className+=" "+i,n=e.getAttribute(v),n||(e.setAttribute(v,e.maxLength),e.removeAttribute("maxLength")),t=e.getAttribute(l),t?e.type="text":e.type==="password"&&w.changeType(e,"text")&&e.setAttribute(l,"password"),!0):!1}function B(e,t){var n,r,i,s,f,l,c;if(e&&e.getAttribute(a))t(e);else{i=e?e.getElementsByTagName("input"):o,s=e?e.getElementsByTagName("textarea"):u,n=i?i.length:0,r=s?s.length:0;for(c=0,l=n+r;c<l;c++)f=c<n?i[c]:s[c-n],t(f)}}function j(e){B(e,P)}function F(e){B(e,H)}function I(e){return function(){E&&e.value===e.getAttribute(a)&&e.getAttribute(f)==="true"?w.moveCaret(e,0):P(e)}}function q(e){return function(){H(e)}}function R(e){return function(t){x=e.value;if(e.getAttribute(f)==="true"&&x===e.getAttribute(a)&&w.inArray(n,t.keyCode))return t.preventDefault&&t.preventDefault(),!1}}function U(e){return function(){P(e,x),e.value===""&&(e.blur(),w.moveCaret(e,0))}}function z(e){return function(){e===D()&&e.value===e.getAttribute(a)&&e.getAttribute(f)==="true"&&w.moveCaret(e,0)}}function W(e){return function(){j(e)}}function X(e){e.form&&(L=e.form,typeof L=="string"&&(L=document.getElementById(L)),L.getAttribute(c)||(w.addEventListener(L,"submit",W(L)),L.setAttribute(c,"true"))),w.addEventListener(e,"focus",I(e)),w.addEventListener(e,"blur",q(e)),E&&(w.addEventListener(e,"keydown",R(e)),w.addEventListener(e,"keyup",U(e)),w.addEventListener(e,"click",z(e))),e.setAttribute(h,"true"),e.setAttribute(a,C),(E||e!==D())&&H(e)}var t=["text","search","url","tel","email","password","number","textarea"],n=[27,33,34,35,36,37,38,39,40,8,46],r="#ccc",i="placeholdersjs",s=new RegExp("(?:^|\\s)"+i+"(?!\\S)"),o,u,a="data-placeholder-value",f="data-placeholder-active",l="data-placeholder-type",c="data-placeholder-submit",h="data-placeholder-bound",p="data-placeholder-focus",d="data-placeholder-live",v="data-placeholder-maxlength",m=document.createElement("input"),g=document.getElementsByTagName("head")[0],y=document.documentElement,b=e.Placeholders,w=b.Utils,E,S,x,T,N,C,k,L,A,O,M;b.nativeSupport=m.placeholder!==void 0;if(!b.nativeSupport){o=document.getElementsByTagName("input"),u=document.getElementsByTagName("textarea"),E=y.getAttribute(p)==="false",S=y.getAttribute(d)!=="false",T=document.createElement("style"),T.type="text/css",N=document.createTextNode("."+i+" { color:"+r+"; }"),T.styleSheet?T.styleSheet.cssText=N.nodeValue:T.appendChild(N),g.insertBefore(T,g.firstChild);for(M=0,O=o.length+u.length;M<O;M++)A=M<o.length?o[M]:u[M-o.length],C=A.attributes.placeholder,C&&(C=C.nodeValue,C&&w.inArray(t,A.type)&&X(A));k=setInterval(function(){for(M=0,O=o.length+u.length;M<O;M++){A=M<o.length?o[M]:u[M-o.length],C=A.attributes.placeholder;if(C){C=C.nodeValue;if(C&&w.inArray(t,A.type)){A.getAttribute(h)||X(A);if(C!==A.getAttribute(a)||A.type==="password"&&!A.getAttribute(l))A.type==="password"&&!A.getAttribute(l)&&w.changeType(A,"text")&&A.setAttribute(l,"password"),A.value===A.getAttribute(a)&&(A.value=C),A.setAttribute(a,C)}}else A.getAttribute(f)&&(P(A),A.removeAttribute(a))}S||clearInterval(k)},100)}w.addEventListener(e,"beforeunload",function(){b.disable()}),b.disable=b.nativeSupport?_:j,b.enable=b.nativeSupport?_:F}(this),define("placeholders",function(){}),define("sf.b2c.mall.component.login.status.scanner",["jquery","can","underscore","store"],function(e,t,n,r){return t.Control.extend({init:function(e,t){this.userLogin=!1,this.insertScanner(),this.setScanner()},insertScanner:function(){e("#proxy").length==0&&e("body").append('<iframe id="proxy" src="http://www.sfht.com/proxy.html" style="display:none;"></iframe>')},setScanner:function(){window.postMessage?this.setPostMesageScanner():this.setWindowNameScanner()},setCsrfToken:function(e){if(e)try{var t=JSON.parse(e.data),n=r.get("csrfToken");n!=t.csrfToken&&r.set("csrfToken",t.csrfToken)}catch(i){throw i}},setPostMesageScanner:function(){window.onmessage=function(){if(event)try{var e=JSON.parse(event.data),t=r.get("csrfToken");t!=e.csrfToken&&r.set("csrfToken",e.csrfToken)}catch(n){throw n}}},setWindowNameScanner:function(){var t=this;this.handler=setInterval(function(){try{var i=e("#proxy").get(0)&&e("#proxy").get(0).contentWindow.name;i&&(r.set("csrfToken",i),this.userStatus!=1&&n.isFunction(t.options.changeStatus)&&t.options.changeStatus(!0))}catch(s){}},500)}})}),define("sf.b2c.mall.widget.modal",["jquery","underscore","can"],function(e,t,n){return n.Control.extend({init:function(e,t){this.modalid=(new Date).valueOf()},show:function(e){e=t.extend(e,{id:this.modalid});var r=n.view.mustache(e&&e.template||this.template());this.element.append(r(e||this.options)),this.element.find(".modal#"+this.modalid+" .mask").show()},hide:function(){this.element.find("#"+this.modalid).remove(),this.closed=!0},isClosed:function(){return this.closed},template:function(){return'<div class="modal" id="{{id}}"><div class="mask"></div><div class="register"><div class="register-h"><h2>{{title}}</h2><a href="#" class="btn btn-close">关闭</a><span class="icon icon34"></span><span class="icon icon35"></span></div><div class="">{{&html}}</div></div></div>'},".btn-close click":function(e,t){t&&t.preventDefault(),this.hide()},setTitle:function(e){this.element.find(".register-h h2").text(e)}})}),define("sf.b2c.mall.widget.not.support",["jquery","can"],function(e,t){return t.Control.extend({init:function(){(this.isIE(6)||this.isIE(7))&&this.render()},isIE:function(e){var t=document.createElement("b");return t.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->",t.getElementsByTagName("i").length===1},".btn-close click":function(t,n){e(".u-dialog-browser").remove(),e(".mask").remove()},render:function(){var e=t.view("templates/widget/sf.b2c.mall.widget.not.support.mustache",{});this.element.prepend(e)}})}),define("sf.util",["jquery","jquery.cookie","can","underscore","md5","store"],function(e,t,n,r,i,s){return n.route.ready(),{checkEmail:function(e){return/^([a-zA-Z0-9-_]*[-_\.]?[a-zA-Z0-9]+)*@([a-zA-Z0-9]*[-_]?[a-zA-Z0-9]+)+[\.][a-zA-Z]{2,3}([\.][a-zA-Z]{2})?$/.test(e)},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Firefox:function(){return navigator.userAgent.indexOf("Firefox")>-1},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()||this.Firefox()}},isLogin:function(){return e.cookie("ct")==1?!0:!1},namespace:function(e){var t=e.split("."),n=sf;for(var r=0;r<t.length;r++)n[t[r]]=n[t[r]]||{},n=n[t[r]];return n},access:function(e,t){if(e.stat.code===0&&e.content[0]&&e.stat.stateList[0].code===0)return!0;if(e.stat.code!=-180&&e.stat.code!=-360)return!1;if(t){var n=window.location.pathname;n!="/login.html"&&(window.location.href="/login.html")}},clean:function(e){return r.each(e,function(t,n,i){(r.isUndefined(t)||r.isNull(t))&&delete e[n]}),e},encrypt:function(e,t){r.each(e,function(t,n,i){r.isUndefined(t)&&delete e[n]});var n=[];r.each(e,function(e,t,r){n.push(t+"="+e)}),n.sort();var s=n.join("");return s+=t,i(s)},sign:function(e,t){var n=this,i={NONE:function(e,t){var n="sfhaitao.xyz!";return r.extend(e,{_sig:sf.util.encrypt(e,n)})},USERLOGIN:function(e,t){var i=s.get("csrfToken");if(i)return r.extend(e,{_sig:n.encrypt(e,i)});if(!t)return e;var o=window.location.pathname;o!="/login.html"&&(window.location.href="/login.html")}},o=i[e.level];if(r.isFunction(o)){var u=r.extend(e.data,{_aid:1,_sm:"md5"});return o(u)}return e.data}}}),define("sf.b2c.mall.component.header",["jquery","jquery.cookie","can","underscore","md5","store","sf.b2c.mall.component.login.status.scanner","sf.b2c.mall.framework.comm","sf.b2c.mall.api.user.getUserInfo","sf.b2c.mall.api.user.logout","sf.b2c.mall.widget.modal","sf.b2c.mall.business.config","sf.b2c.mall.widget.not.support","sf.util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=1;return n.Control.extend({defaults:{login:{myOrder:c.setting.link.orderlist},nologin:{myOrder:c.setting.link.login}},init:function(t,i){this.component={},this.component.modal=new l("body"),this.component.scanner=new o,this.component.notSupport=new h("body"),this.watchLoginState.call(this),this.afterLoginDest=null;if(u.prototype.checkUserLogin.call(this)){var s=e.cookie(d+"_uinfo"),a=[];s&&(a=s.split(",")),this.data=new n.Map(r.extend(this.defaults.login,{isUserLogin:!0,index:c.setting.link.index,nickname:a[0]}))}else this.data=new n.Map(r.extend(this.defaults.nologin,{isUserLogin:!1,index:c.setting.link.index,nickname:null}));this.render(this.data);if(this.options.isForceLogin){var f=this;u.prototype.checkUserLogin.call(f)||(window.location.href=c.setting.link.index)}},render:function(e){var t=n.view("templates/component/sf.b2c.mall.header.mustache",e);this.element.html(t)},"#user-setting click":function(e,t){t&&t.preventDefault()},"#user-orderlist click":function(e,t){t&&t.preventDefault(),u.prototype.checkUserLogin.call(this)?window.location.href=c.setting.link.orderlist+window.location.search+window.location.hash:this.showLogin("orderlist")},"#user-password-change click":function(e,t){t&&t.preventDefault(),u.prototype.checkUserLogin.call(this)?window.location.href=c.setting.link.passwordchange:this.showLogin("passwordchange")},"#user-center click":function(e,t){t&&t.preventDefault(),u.prototype.checkUserLogin.call(this)?window.location.href=c.setting.link.center:this.showLogin("center")},"#user-logout click":function(e,t){t&&t.preventDefault();var n=this;if(u.prototype.checkUserLogin.call(this)){var r=new f({});r.sendRequest().done(function(e){n.data.attr("user",null),s.remove("csrfToken"),setTimeout(function(){window.location.href=c.setting.link.index},2e3)}).fail(function(){})}},"#my-account click":function(e,t){t&&t.preventDefault()},"#user-login click":function(e,t){t&&t.preventDefault(),this.showLogin()},"#user-register click":function(e,t){t&&t.preventDefault(),this.showRegister()},showRegister:function(e){if(p.isMobile.any())return window.location.href=c.setting.link.iregister;e&&(this.afterLoginDest=e),this.component.modal.show({title:"登录顺丰海淘",html:'<iframe height="535px" width="100%" frameborder="no" seamless="" src="'+c.setting.link.register+'"></iframe>'})},showLogin:function(e){if(p.isMobile.any())return window.location.href=c.setting.link.ilogin;e&&(this.afterLoginDest=e),this.component.modal.show({title:"登录顺丰海淘",html:'<iframe height="535px" width="100%" frameborder="no" seamless="" src="'+c.setting.link.login+'"></iframe>'}),this.component.modal.setTitle("顺丰海淘")},watchLoginState:function(){var t=this;setInterval(function(){t.component.modal.isClosed()&&(t.afterLoginDest=null);if(u.prototype.checkUserLogin.call(t)){t.component.modal.isClosed()||t.component.modal.hide();if(t.afterLoginDest){var n=c.setting.link[t.afterLoginDest]||t.afterLoginDest;window.location.href=n}var r=e.cookie(d+"_uinfo"),i=[];r&&(i=r.split(",")),t.data.attr("isUserLogin",!0),t.data.attr("nickname",i[0])}else t.data.attr("isUserLogin",!1),t.data.attr("nickname",null)},500)}})}),define("sf.b2c.mall.component.footer",["can"],function(e){return e.Control.extend({init:function(t,n){var r=e.view("templates/component/sf.b2c.mall.footer.mustache")({});this.element.html(r)}})}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Nt.call(e,t)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){bt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&0}function s(e,t){var n=!0;return h(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){gn[e]||(i(t),gn[e]=!0)}function u(e,t){return function(n){return v(e.call(this,n),t)}}function a(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function f(){}function l(e,t){t!==!1&&M(e),p(this,e),this._d=new Date(+e._d)}function c(e){var t=T(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*f+6e4*a+36e5*u,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=bt.localeData(),this._bubble()}function h(e,t){for(var r in t)n(t,r)&&(e[r]=t[r]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Pt.length>0)for(n in Pt)r=Pt[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function d(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function m(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=B(t,e),e.isBefore(t)?n=m(e,t):(n=m(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function y(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=bt.duration(n,r),b(this,i,e),this}}function b(e,t,n,r){var i=t._milliseconds,s=t._days,o=t._months;r=null==r?!0:r,i&&e._d.setTime(+e._d+i*n),s&&pt(e,"Date",ht(e,"Date")+s*n),o&&ct(e,ht(e,"Month")+o*n),r&&bt.updateOffset(e,s||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function E(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function S(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&C(e[r])!==C(t[r]))&&o++;return o+s}function x(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ln[e]||cn[t]||t}return e}function T(e){var t,r,i={};for(r in e)n(e,r)&&(t=x(r),t&&(i[t]=e[r]));return i}function N(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}bt[t]=function(i,s){var o,u,a=bt._locale[t],f=[];if("number"==typeof i&&(s=i,i=e),u=function(e){var t=bt().utc().set(r,e);return a.call(bt._locale,t,i||"")},null!=s)return u(s);for(o=0;n>o;o++)f.push(u(o));return f}}function C(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function k(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function L(e,t,n){return ut(bt([e,11,31+t-n]),t,n).week}function A(e){return O(e)?366:365}function O(e){return e%4===0&&e%100!==0||e%400===0}function M(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[kt]<0||e._a[kt]>11?kt:e._a[Lt]<1||e._a[Lt]>k(e._a[Ct],e._a[kt])?Lt:e._a[At]<0||e._a[At]>24||24===e._a[At]&&(0!==e._a[Ot]||0!==e._a[Mt]||0!==e._a[_t])?At:e._a[Ot]<0||e._a[Ot]>59?Ot:e._a[Mt]<0||e._a[Mt]>59?Mt:e._a[_t]<0||e._a[_t]>999?_t:-1,e._pf._overflowDayOfYear&&(Ct>t||t>Lt)&&(t=Lt),e._pf.overflow=t)}function _(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function D(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){for(var t,n,r,i,s=0;s<e.length;){for(i=D(e[s]).split("-"),t=i.length,n=D(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=H(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&S(i,n,!0)>=t-1)break;t--}s++}return null}function H(e){var t=null;if(!Dt[e]&&Ht)try{t=bt.locale(),require("./locale/"+e),bt.locale(t)}catch(n){}return Dt[e]}function B(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(bt.isMoment(e)||E(e)?+e:+bt(e))- +n,n._d.setTime(+n._d+r),bt.updateOffset(n,!1),n):bt(e).local()}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function F(e){var t,n,r=e.match(It);for(t=0,n=r.length;n>t;t++)r[t]=mn[r[t]]?mn[r[t]]:j(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function I(e,t){return e.isValid()?(t=q(t,e.localeData()),hn[t]||(hn[t]=F(t)),hn[t](e)):e.localeData().invalidDate()}function q(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(qt.lastIndex=0;r>=0&&qt.test(e);)e=e.replace(qt,n),qt.lastIndex=0,r-=1;return e}function R(e,t){var n,r=t._strict;switch(e){case"Q":return Gt;case"DDDD":return Zt;case"YYYY":case"GGGG":case"gggg":return r?en:zt;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?tn:Wt;case"S":if(r)return Gt;case"SS":if(r)return Yt;case"SSS":if(r)return Zt;case"DDD":return Ut;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Vt;case"a":case"A":return t._locale._meridiemParse;case"x":return Kt;case"X":return Qt;case"Z":case"ZZ":return $t;case"T":return Jt;case"SSSS":return Xt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Yt:Rt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Rt;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Q(K(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match($t)||[],n=t[t.length-1]||[],r=(n+"").match(an)||["-",0,0],i=+(60*r[1])+C(r[2]);return"+"===r[0]?-i:i}function z(e,t,n){var r,i=n._a;switch(e){case"Q":null!=t&&(i[kt]=3*(C(t)-1));break;case"M":case"MM":null!=t&&(i[kt]=C(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),null!=r?i[kt]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[Lt]=C(t));break;case"Do":null!=t&&(i[Lt]=C(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=C(t));break;case"YY":i[Ct]=bt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Ct]=C(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[At]=C(t);break;case"m":case"mm":i[Ot]=C(t);break;case"s":case"ss":i[Mt]=C(t);break;case"S":case"SS":case"SSS":case"SSSS":i[_t]=C(1e3*("0."+t));break;case"x":n._d=new Date(C(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=U(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=C(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=bt.parseTwoDigitYear(t)}}function W(e){var n,r,i,s,o,u,a;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,u=4,r=t(n.GG,e._a[Ct],ut(bt(),1,4).year),i=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,r=t(n.gg,e._a[Ct],ut(bt(),o,u).year),i=t(n.w,1),null!=n.d?(s=n.d,o>s&&++i):s=null!=n.e?n.e+o:o),a=at(r,i,s,u,o),e._a[Ct]=a.year,e._dayOfYear=a.dayOfYear}function X(e){var n,r,i,s,o=[];if(!e._d){for(i=$(e),e._w&&null==e._a[Lt]&&null==e._a[kt]&&W(e),e._dayOfYear&&(s=t(e._a[Ct],i[Ct]),e._dayOfYear>A(s)&&(e._pf._overflowDayOfYear=!0),r=rt(s,0,e._dayOfYear),e._a[kt]=r.getUTCMonth(),e._a[Lt]=r.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=i[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[At]&&0===e._a[Ot]&&0===e._a[Mt]&&0===e._a[_t]&&(e._nextDay=!0,e._a[At]=0),e._d=(e._useUTC?rt:nt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[At]=24)}}function V(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],X(e))}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function J(t){if(t._f===bt.ISO_8601)return void Y(t);t._a=[],t._pf.empty=!0;var n,r,i,s,o,u=""+t._i,a=u.length,f=0;for(i=q(t._f,t._locale).match(It)||[],n=0;n<i.length;n++)s=i[n],r=(u.match(R(s,t))||[])[0],r&&(o=u.substr(0,u.indexOf(r)),o.length>0&&t._pf.unusedInput.push(o),u=u.slice(u.indexOf(r)+r.length),f+=r.length),mn[s]?(r?t._pf.empty=!1:t._pf.unusedTokens.push(s),z(s,r,t)):t._strict&&!r&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=a-f,u.length>0&&t._pf.unusedInput.push(u),t._pf.bigHour===!0&&t._a[At]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[At]<12&&(t._a[At]+=12),t._isPm===!1&&12===t._a[At]&&(t._a[At]=0),X(t),M(t)}function K(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function G(e){var t,n,i,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void (e._d=new Date(0/0));for(s=0;s<e._f.length;s++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[s],J(t),_(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||i>o)&&(i=o,n=t));h(e,n||t)}function Y(e){var t,n,r=e._i,i=rn.exec(r);if(i){for(e._pf.iso=!0,t=0,n=on.length;n>t;t++)if(on[t][1].exec(r)){e._f=on[t][0]+(i[6]||" ");break}for(t=0,n=un.length;n>t;t++)if(un[t][1].exec(r)){e._f+=un[t][0];break}r.match($t)&&(e._f+="Z"),J(e)}else e._isValid=!1}function Z(e){Y(e),e._isValid===!1&&(delete e._isValid,bt.createFromInputFallback(e))}function et(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function tt(t){var n,r=t._i;r===e?t._d=new Date:E(r)?t._d=new Date(+r):null!==(n=Bt.exec(r))?t._d=new Date(+n[1]):"string"==typeof r?Z(t):w(r)?(t._a=et(r.slice(0),function(e){return parseInt(e,10)}),X(t)):"object"==typeof r?V(t):"number"==typeof r?t._d=new Date(r):bt.createFromInputFallback(t)}function nt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function st(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ot(e,t,n){var r=bt.duration(e).abs(),i=Tt(r.as("s")),s=Tt(r.as("m")),o=Tt(r.as("h")),u=Tt(r.as("d")),a=Tt(r.as("M")),f=Tt(r.as("y")),l=i<pn.s&&["s",i]||1===s&&["m"]||s<pn.m&&["mm",s]||1===o&&["h"]||o<pn.h&&["hh",o]||1===u&&["d"]||u<pn.d&&["dd",u]||1===a&&["M"]||a<pn.M&&["MM",a]||1===f&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,st.apply({},l)}function ut(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=bt(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function at(e,t,n,r,i){var s,o,u=rt(e,0,1).getUTCDay();return u=0===u?7:u,n=null!=n?n:i,s=i-u+(u>r?7:0)-(i>u?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:A(e-1)+o}}function ft(t){var n,r=t._i,i=t._f;return t._locale=t._locale||bt.localeData(t._l),null===r||i===e&&""===r?bt.invalid({nullInput:!0}):("string"==typeof r&&(t._i=r=t._locale.preparse(r)),bt.isMoment(r)?new l(r,!0):(i?w(i)?G(t):J(t):tt(t),n=new l(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function lt(e,t){var n,r;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function ct(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),k(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function ht(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,n){return"Month"===t?ct(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function dt(e,t){return function(n){return null!=n?(pt(this,e,n),bt.updateOffset(this,t),this):ht(this,e)}}function vt(e){return 400*e/146097}function mt(e){return 146097*e/400}function gt(e){bt.duration.fn[e]=function(){return this._data[e]}}function yt(e){"undefined"==typeof ender&&(wt=xt.moment,xt.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bt):bt)}for(var bt,wt,Et,St="2.8.4",xt="undefined"!=typeof global?global:this,Tt=Math.round,Nt=Object.prototype.hasOwnProperty,Ct=0,kt=1,Lt=2,At=3,Ot=4,Mt=5,_t=6,Dt={},Pt=[],Ht="undefined"!=typeof module&&module&&module.exports,Bt=/^\/?Date\((\-?\d+)/i,jt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ft=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,It=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,qt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rt=/\d\d?/,Ut=/\d{1,3}/,zt=/\d{1,4}/,Wt=/[+\-]?\d{1,6}/,Xt=/\d+/,Vt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,Jt=/T/i,Kt=/[\+\-]?\d+/,Qt=/[\+\-]?\d+(\.\d{1,3})?/,Gt=/\d/,Yt=/\d\d/,Zt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sn="YYYY-MM-DDTHH:mm:ssZ",on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],un=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],an=/([\+\-]|\d\d)/gi,fn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ln={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},cn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hn={},pn={s:45,m:45,h:22,d:26,M:11},dn="DDD w W M D d".split(" "),vn="M D H h m s w W".split(" "),mn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return v(C(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(C(e/60),2)+":"+v(C(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+v(C(e/60),2)+v(C(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gn={},yn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];dn.length;)Et=dn.pop(),mn[Et+"o"]=a(mn[Et],Et);for(;vn.length;)Et=vn.pop(),mn[Et+Et]=u(mn[Et],2);mn.DDDD=u(mn.DDD,3),h(f.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,i,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=bt.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=bt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ut(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bt=function(t,n,i,s){var o;return"boolean"==typeof i&&(s=i,i=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=i,o._strict=s,o._isUTC=!1,o._pf=r(),ft(o)},bt.suppressDeprecationWarnings=!1,bt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),bt.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)},bt.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)},bt.utc=function(t,n,i,s){var o;return"boolean"==typeof i&&(s=i,i=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=i,o._i=t,o._f=n,o._strict=s,o._pf=r(),ft(o).utc()},bt.unix=function(e){return bt(1e3*e)},bt.duration=function(e,t){var r,i,s,o,u=e,a=null;return bt.isDuration(e)?u={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(u={},t?u[t]=e:u.milliseconds=e):(a=jt.exec(e))?(r="-"===a[1]?-1:1,u={y:0,d:C(a[Lt])*r,h:C(a[At])*r,m:C(a[Ot])*r,s:C(a[Mt])*r,ms:C(a[_t])*r}):(a=Ft.exec(e))?(r="-"===a[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r},u={y:s(a[2]),M:s(a[3]),d:s(a[4]),h:s(a[5]),m:s(a[6]),s:s(a[7]),w:s(a[8])}):"object"==typeof u&&("from"in u||"to"in u)&&(o=g(bt(u.from),bt(u.to)),u={},u.ms=o.milliseconds,u.M=o.months),i=new c(u),bt.isDuration(e)&&n(e,"_locale")&&(i._locale=e._locale),i},bt.version=St,bt.defaultFormat=sn,bt.ISO_8601=function(){},bt.momentProperties=Pt,bt.updateOffset=function(){},bt.relativeTimeThreshold=function(t,n){return pn[t]===e?!1:n===e?pn[t]:(pn[t]=n,!0)},bt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return bt.locale(e,t)}),bt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?bt.defineLocale(e,t):bt.localeData(e),n&&(bt.duration._locale=bt._locale=n)),bt._locale._abbr},bt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Dt[e]||(Dt[e]=new f),Dt[e].set(t),bt.locale(e),Dt[e]):(delete Dt[e],null)},bt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return bt.localeData(e)}),bt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return bt._locale;if(!w(e)){if(t=H(e))return t;e=[e]}return P(e)},bt.isMoment=function(e){return e instanceof l||null!=e&&n(e,"_isAMomentObject")},bt.isDuration=function(e){return e instanceof c};for(Et=yn.length-1;Et>=0;--Et)N(yn[Et]);bt.normalizeUnits=function(e){return x(e)},bt.invalid=function(e){var t=bt.utc(0/0);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},bt.parseZone=function(){return bt.apply(null,arguments).parseZone()},bt.parseTwoDigitYear=function(e){return C(e)+(C(e)>68?1900:2e3)},h(bt.fn=l.prototype,{clone:function(){return bt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=bt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():I(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):I(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return _(this)},isDSTShifted:function(){return this._a?this.isValid()&&S(this._a,(this._isUTC?bt.utc(this._a):bt(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=I(this,e||bt.defaultFormat);return this.localeData().postformat(t)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(e,t,n){var r,i,s,o=B(e,this),u=6e4*(this.zone()-o.zone());return t=x(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+o.daysInMonth()),i=12*(this.year()-o.year())+(this.month()-o.month()),s=this-bt(this).startOf("month")-(o-bt(o).startOf("month")),s-=6e4*(this.zone()-bt(this).startOf("month").zone()-(o.zone()-bt(o).startOf("month").zone())),i+=s/r,"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-u)/864e5:"week"===t?(r-u)/6048e5:r),n?i:d(i)},from:function(e,t){return bt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(bt(),e)},calendar:function(e){var t=e||bt(),n=B(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,bt(t)))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=it(e,this.localeData()),this.add(e-t,"d")):t},month:dt("Month",!0),startOf:function(e){switch(e=x(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=x(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this>+e):(n=bt.isMoment(e)?+e:+bt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=x("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+e>+this):(n=bt.isMoment(e)?+e:+bt(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=x(t||"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this===+e):(n=+bt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,r=this._offset||0;return null==e?this._isUTC?r:this._dateTzOffset():("string"==typeof e&&(e=U(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==e&&(!t||this._changeInProgress?b(this,bt.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?bt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return k(this.year(),this.month())},dayOfYear:function(e){var t=Tt((bt(this).startOf("day")-bt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ut(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ut(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return L(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return L(this.year(),e.dow,e.doy)},get:function(e){return e=x(e),this[e]()},set:function(e,t){return e=x(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=bt.localeData(t),null!=n&&(this._locale=n),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),bt.fn.millisecond=bt.fn.milliseconds=dt("Milliseconds",!1),bt.fn.second=bt.fn.seconds=dt("Seconds",!1),bt.fn.minute=bt.fn.minutes=dt("Minutes",!1),bt.fn.hour=bt.fn.hours=dt("Hours",!0),bt.fn.date=dt("Date",!0),bt.fn.dates=s("dates accessor is deprecated. Use date instead.",dt("Date",!0)),bt.fn.year=dt("FullYear",!0),bt.fn.years=s("years accessor is deprecated. Use year instead.",dt("FullYear",!0)),bt.fn.days=bt.fn.day,bt.fn.months=bt.fn.month,bt.fn.weeks=bt.fn.week,bt.fn.isoWeeks=bt.fn.isoWeek,bt.fn.quarters=bt.fn.quarter,bt.fn.toJSON=bt.fn.toISOString,h(bt.duration.fn=c.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,i=this._days,s=this._months,o=this._data,u=0;o.milliseconds=r%1e3,e=d(r/1e3),o.seconds=e%60,t=d(e/60),o.minutes=t%60,n=d(t/60),o.hours=n%24,i+=d(n/24),u=d(vt(i)),i-=d(mt(u)),s+=d(i/30),i%=30,u+=d(s/12),s%=12,o.days=i,o.months=s,o.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*C(this._months/12)},humanize:function(e){var t=ot(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=bt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=bt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=x(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=x(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*vt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(mt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:bt.fn.lang,locale:bt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),bt.duration.fn.toString=bt.duration.fn.toISOString;for(Et in fn)n(fn,Et)&&gt(Et.toLowerCase());bt.duration.fn.asMilliseconds=function(){return this.as("ms")},bt.duration.fn.asSeconds=function(){return this.as("s")},bt.duration.fn.asMinutes=function(){return this.as("m")},bt.duration.fn.asHours=function(){return this.as("h")},bt.duration.fn.asDays=function(){return this.as("d")},bt.duration.fn.asWeeks=function(){return this.as("weeks")},bt.duration.fn.asMonths=function(){return this.as("M")},bt.duration.fn.asYears=function(){return this.as("y")},bt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ht?module.exports=bt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(xt.moment=wt),bt}),yt(!0)):yt()}.call(this),define("sf.helpers",["jquery","jquery.cookie","can","underscore","md5","moment"],function(e,t,n,r,i,s){n.Mustache.registerHelper("sf.toggle",function(e){return function(t){new Toggle(t,{value:e})}}),n.Mustache.registerHelper("sf.time",function(e){return r.isFunction(e)&&(e=e()),s(e).format("YYYY-MM-DD HH:mm:ss")}),n.Mustache.registerHelper("sf.price",function(e){var t=function(t){r.isFunction(t)&&(e=t())};while(r.isFunction(e))t(e);return(e/100).toString()}),n.Mustache.registerHelper("sf.img",function(e,t){r.isFunction(e)&&(e=e());var n=[];r.isString(e)?n=e.split(","):r.isArray(e)&&(n=e);var i=r.str.include(n[0],"http://");return i?n[0]:"http://img0.sfht.com/"+n[0]})}),function(e,t){var n={},r=function(e,t){var n,r,i;if(typeof e=="string")return o(e);n=[];for(r=e.length,i=0;i<r;i++)n.push(o(e[i]));return t.apply(null,n)},i=function(e,t,n){arguments.length===2&&(n=t,t=null),r(t||[],function(){s(e,n,arguments)})},s=function(e,t,i){var s={exports:t},o;typeof t=="function"&&(i.length||(i=[r,s.exports,s]),o=t.apply(null,i),o!==undefined&&(s.exports=o)),n[e]=s.exports},o=function(t){var r=n[t]||e[t];if(!r)throw new Error("`"+t+"` is undefined");return r},u=function(e){var t,r,i,s,o,u;u=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in n){r=e;if(!n.hasOwnProperty(t))continue;i=t.split("/"),o=u(i.pop());while(s=u(i.shift()))r[s]=r[s]||{},r=r[s];r[o]=n[t]}return e},a=function(n){return e.__dollar=n,u(t(e,i,r))},f;typeof module=="object"&&typeof module.exports=="object"?module.exports=a():typeof define=="function"&&define.amd?define("webuploader",["jquery"],a):(f=e.WebUploader,e.WebUploader=a(),e.WebUploader.noConflict=function(){e.WebUploader=f})}(window,function(e,t,n){return t("dollar-third",[],function(){var t=e.__dollar||e.jQuery||e.Zepto;if(!t)throw new Error("jQuery or Zepto not found!");return t}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&typeof e.then=="function"}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function s(e){return function(){return i.apply(e,arguments)}}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var r=function(){},i=Function.call;return{version:"0.1.5",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),s=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),u=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),s&&(t.firefox=parseFloat(s[1])),o&&(t.safari=parseFloat(o[1])),u&&(t.opera=parseFloat(u[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var i;return typeof n=="function"?(i=n,n=null):n&&n.hasOwnProperty("constructor")?i=n.constructor:i=function(){return e.apply(this,arguments)},t.extend(!0,i,e,r||{}),i.__super__=e.prototype,i.prototype=u(e.prototype),n&&t.extend(!0,i.prototype,n),i},noop:r,bindFn:o,log:function(){return e.console?o(console.log,console):r}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:s([].slice),guid:function(){var e=0;return function(t){var n=(+(new Date)).toString(32),r=0;for(;r<5;r++)n+=Math.floor(Math.random()*65535).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;n=n||["B","K","M","G","TB"];while((r=n.shift())&&e>1024)e/=1024;return(r==="B"?e:e.toFixed(t||2))+r}}}),t("mediator",["base"],function(e){function s(e,n,r,i){return t.grep(e,function(e){return e&&(!n||e.e===n)&&(!r||e.cb===r||e.cb._cb===r)&&(!i||e.ctx===i)})}function o(e,n,i){t.each((e||"").split(r),function(e,t){i(t,n)})}function u(e,t){var n=!1,r=-1,i=e.length,s;while(++r<i){s=e[r];if(s.cb.apply(s.ctx2,t)===!1){n=!0;break}}return!n}var t=e.$,n=[].slice,r=/\s+/,i;return i={on:function(e,t,n){var r=this,i;return t?(i=this._events||(this._events=[]),o(e,t,function(e,t){var s={e:e};s.cb=t,s.ctx=n,s.ctx2=n||r,s.id=i.length,i.push(s)}),this):this},once:function(e,t,n){var r=this;return t?(o(e,t,function(e,t){var i=function(){return r.off(e,i),t.apply(n||r,arguments)};i._cb=t,r.on(e,i,n)}),r):r},off:function(e,n,r){var i=this._events;return i?!e&&!n&&!r?(this._events=[],this):(o(e,n,function(e,n){t.each(s(i,e,n,r),function(){delete i[this.id]})}),this):this},trigger:function(e){var t,r,i;return!this._events||!e?this:(t=n.call(arguments,1),r=s(this._events,e),i=s(this._events,"all"),u(r,t)&&u(i,arguments))}},t.extend({installTo:function(e){return t.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function r(e){this.options=n.extend(!0,{},r.options,e),this._init(this.options)}var n=e.$;return r.options={},t.installTo(r.prototype),n.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){r.prototype[e]=function(){return this.request(t,arguments)}}),n.extend(r.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var r=this.options;if(!(arguments.length>1))return e?r[e]:r;n.isPlainObject(t)&&n.isPlainObject(r[e])?n.extend(r[e],t):r[e]=t},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var r=[].slice.call(arguments,1),i=this.options,s="on"+e.substring(0,1).toUpperCase()+e.substring(1);return t.trigger.apply(this,arguments)===!1||n.isFunction(i[s])&&i[s].apply(this,r)===!1||n.isFunction(this[s])&&this[s].apply(this,r)===!1||t.trigger.apply(t,[this,e].concat(r))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=r.create=function(e){return new r(e)},e.Uploader=r,r}),t("runtime/runtime",["base","mediator"],function(e,t){function s(t){this.options=n.extend({container:document.body},t),this.uid=e.guid("rt_")}var n=e.$,r={},i=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return n.extend(s.prototype,{getContainer:function(){var e=this.options,t,r;return this._container?this._container:(t=n(e.container||document.body),r=n(document.createElement("div")),r.attr("id","rt_"+this.uid),r.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t.append(r),t.addClass("webuploader-container"),this._container=r,this._parent=t,r)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),s.orders="html5,flash",s.addRuntime=function(e,t){r[e]=t},s.hasRuntime=function(e){return e?!!r[e]:!!i(r)},s.create=function(e,t){var o,u;t=t||s.orders,n.each(t.split(/\s*,\s*/g),function(){if(r[this])return o=this,!1}),o=o||i(r);if(!o)throw new Error("Runtime Error");return u=new r[o](e),u},t.installTo(s.prototype),s}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function i(t,i){var s=e.Deferred(),o;this.uid=e.guid("client_"),this.runtimeReady=function(e){return s.done(e)},this.connectRuntime=function(t,u){if(o)throw new Error("already connected!");return s.done(u),typeof t=="string"&&r.get(t)&&(o=r.get(t)),o=o||r.get(null,i),o?(e.$.extend(o.options,t),o.__promise.then(s.resolve),o.__client++):(o=n.create(t,t.runtimeOrder),o.__promise=s.promise(),o.once("ready",s.resolve),o.init(),r.add(o),o.__client=1),i&&(o.__standalone=i),o},this.getRuntime=function(){return o},this.disconnectRuntime=function(){if(!o)return;o.__client--,o.__client<=0&&(r.remove(o),delete o.__promise,o.destroy()),o=null},this.exec=function(){if(!o)return;var n=e.slice(arguments);return t&&n.unshift(t),o.exec.apply(this,n)},this.getRuid=function(){return o&&o.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var r;return r=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e){if(n&&e[r].__standalone)continue;return e[r]}return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(i.prototype),i}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},i.options,e),e.container=r(e.container);if(!e.container.length)return;n.call(this,"DragAndDrop")}var r=e.$;return i.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),t("widgets/widget",["base","uploader"],function(e,t){function u(e){if(!e)return!1;var t=e.length,r=n.type(e);return e.nodeType===1&&t?!0:r==="array"||r!=="function"&&r!=="string"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function a(e){this.owner=e,this.options=e.options}var n=e.$,r=t.prototype._init,i=t.prototype.destroy,s={},o=[];return n.extend(a.prototype,{init:e.noop,invoke:function(e,t){var r=this.responseMap;return!!r&&e in r&&r[e]in this&&!!n.isFunction(this[r[e]])?this[r[e]].apply(this,t):s},request:function(){return this.owner.request.apply(this.owner,arguments)}}),n.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],i=e.options.disableWidgets||"";return n.each(o,function(n,r){(!i||!~i.indexOf(r._name))&&t.push(new r(e))}),r.apply(e,arguments)},request:function(t,n,r){var i=0,o=this._widgets,a=o&&o.length,f=[],l=[],c,h,p,d;n=u(n)?n:[n];for(;i<a;i++)c=o[i],h=c.invoke(t,n),h!==s&&(e.isPromise(h)?l.push(h):f.push(h));return r||l.length?(p=e.when.apply(e,l),d=p.pipe?"pipe":"then",p[d](function(){var t=e.Deferred(),n=arguments;return n.length===1&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[r?d:"done"](r||e.noop)):f[0]},destroy:function(){i.apply(this,arguments),this._widgets=null}}),t.register=a.register=function(t,r){var i={init:"init",destroy:"destroy",name:"anonymous"},s;return arguments.length===1?(r=t,n.each(r,function(e){if(e[0]==="_"||e==="name"){e==="name"&&(i.name=r.name);return}i[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e})):i=n.extend(i,t),r.responseMap=i,s=e.inherits(a,r),s._name=i.name,o.push(s),s},t.unRegister=a.unRegister=function(e){if(!e||e==="anonymous")return;for(var t=o.length;t--;)o[t]._name===e&&o.splice(t,1)},a}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(!t.dnd||this.request("predict-runtime-type")!=="html5")return;var i=this,s=e.Deferred(),o=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept}),u;return this.dnd=u=new n(o),u.once("ready",s.resolve),u.on("drop",function(e){i.request("add-file",[e])}),u.on("accept",function(e){return i.owner.trigger("dndAccept",e)}),u.init(),s.promise()},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function i(e){e=this.options=r.extend({},e),e.container=r(e.container||document.body),n.call(this,"FilePaste")}var r=e.$;return e.inherits(n,{constructor:i,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(i.prototype),i}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(!t.paste||this.request("predict-runtime-type")!=="html5")return;var i=this,s=e.Deferred(),o=r.extend({},{container:t.paste,accept:t.accept}),u;return this.paste=u=new n(o),u.once("ready",s.resolve),u.on("paste",function(e){i.owner.request("add-file",[e])}),u.init(),s.promise()},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+(this.ext==="jpg"?"jpeg":this.ext):this.type=n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function i(e,i){var s;this.name=i.name||"untitled"+n++,s=r.exec(i.name)?RegExp.$1.toLowerCase():"",!s&&i.type&&(s=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(i.type)?RegExp.$1.toLowerCase():"",this.name+="."+s),this.ext=s,this.lastModifiedDate=i.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var n=1,r=/\.([^.]+)$/;return e.inherits(t,i)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function s(e){e=this.options=i.extend({},s.options,e),e.container=i(e.id);if(!e.container.length)throw new Error("按钮指定错误");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=i(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var i=t.$;return s.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(n,{constructor:s,init:function(){var n=this,s=n.options,o=s.button;o.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":o.addClass("webuploader-pick-hover");break;case"mouseleave":o.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",i.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=s.container,e}),s.container)}}),n.connectRuntime(s,function(){n.refresh(),n.exec("init",s),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),i(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;i(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),s}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var i=this,s=i.options,o=s.accept,u=[];if(!t)return;return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var a,f,l;l=e.Deferred(),a=r.extend({},t,{accept:r.isPlainObject(o)?[o]:o,swf:s.swf,runtimeOrder:s.runtimeOrder,id:this}),f=new n(a),f.once("ready",l.resolve),f.on("select",function(e){i.owner.request("add-file",[e])}),f.init(),i.pickers.push(f),u.push(l.promise())}),e.when.apply(e,u)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function i(e){this.options=r.extend({},i.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var r=e.$;return i.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:i,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),i}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r=e.$,i;return i=function(e){var t=0,n=[],r=function(){var r;while(n.length&&t<e)r=n.shift(),t+=r[0],r[1]()};return function(e,i,s){n.push([i,s]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(5242880),r.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,s,o){var u,a;e=this.request("get-file",e);if(!e.type.match(/^image/)){t(!0);return}u=r.extend({},this.options.thumb),r.isPlainObject(s)&&(u=r.extend(u,s),s=null),s=s||u.width,o=o||u.height,a=new n(u),a.once("load",function(){e._info=e._info||a.info(),e._meta=e._meta||a.meta(),s<=1&&s>0&&(s=e._info.width*s),o<=1&&o>0&&(o=e._info.height*o),a.resize(s,o)}),a.once("complete",function(){t(!1,a.getAsDataUrl(u.type)),a.destroy()}),a.once("error",function(e){t(e||!0),a.destroy()}),i(a,e.source.size,function(){e._info&&a.info(e._info),e._meta&&a.meta(e._meta),a.loadFromBlob(e.source)})},beforeSendFile:function(t){var i=this.options.compress||this.options.resize,s=i&&i.compressSize||0,o=i&&i.noCompressIfLarger||!1,u,a;t=this.request("get-file",t);if(!i||!~"image/jpeg,image/jpg".indexOf(t.type)||t.size<s||t._compressed)return;return i=r.extend({},i),a=e.Deferred(),u=new n(i),a.always(function(){u.destroy(),u=null}),u.once("error",a.reject),u.once("load",function(){var e=i.width,n=i.height;t._info=t._info||u.info(),t._meta=t._meta||u.meta(),e<=1&&e>0&&(e=t._info.width*e),n<=1&&n>0&&(n=t._info.height*n),u.resize(e,n)}),u.once("complete",function(){var e,n;try{e=u.getAsBlob(i.type),n=t.size;if(!o||e.size<n)t.source=e,t.size=e.size,t.trigger("resize",e.size,n);t._compressed=!0,a.resolve()}catch(r){a.resolve()}}),t._info&&u.info(t._info),t._meta&&u.meta(t._meta),u.loadFromBlob(t.source),a.promise()}})}),t("file",["base","mediator"],function(e,t){function u(){return r+i++}function a(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||new Date*1,this.id=u(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",o[this.id]=a.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(a.Status.ERROR,e)})}var n=e.$,r="WU_FILE_",i=0,s=/\.([^.]+)$/,o={};return n.extend(a.prototype,{setStatus:function(e,t){var n=o[this.id];typeof t!="undefined"&&(this.statusText=t),e!==n&&(o[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return o[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete o[this.id]}}),t.installTo(a.prototype),a.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},a}),t("queue",["base","mediator","file"],function(e,t,n){function s(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var r=e.$,i=n.Status;return r.extend(s.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return typeof e!="string"?e:this._map[e]},fetch:function(e){var t=this._queue.length,n,r;e=e||i.QUEUED;for(n=0;n<t;n++){r=this._queue[n];if(e===r.getStatus())return r}return null},sort:function(e){typeof e=="function"&&this._queue.sort(e)},getFiles:function(){var e=[].slice.call(arguments,0),t=[],n=0,i=this._queue.length,s;for(;n<i;n++){s=this._queue[n];if(e.length&&!~r.inArray(s.getStatus(),e))continue;t.push(s)}return t},removeFile:function(e){var t=this,n=this._map[e.id];n&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case i.PROGRESS:n.numOfProgress--;break;case i.QUEUED:n.numOfQueue--;break;case i.ERROR:n.numOfUploadFailed--;break;case i.INVALID:n.numOfInvalid--;break;case i.INTERRUPT:n.numofInterrupt--}switch(e){case i.QUEUED:n.numOfQueue++;break;case i.PROGRESS:n.numOfProgress++;break;case i.ERROR:n.numOfUploadFailed++;break;case i.COMPLETE:n.numOfSuccess++;break;case i.CANCELLED:n.numOfCancel++;break;case i.INVALID:n.numOfInvalid++;break;case i.INTERRUPT:n.numofInterrupt++}}}),t.installTo(s.prototype),s}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,s){var o=e.$,u=/\.\w+$/,a=r.Status;return t.register({name:"queue",init:function(t){var r=this,i,u,a,f,l,c,h;o.isPlainObject(t.accept)&&(t.accept=[t.accept]);if(t.accept){l=[];for(a=0,u=t.accept.length;a<u;a++)f=t.accept[a].extensions,f&&l.push(f);l.length&&(c="\\."+l.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),r.accept=new RegExp(c,"i")}r.queue=new n,r.stats=r.queue.stats;if(this.request("predict-runtime-type")!=="html5")return;return i=e.Deferred(),this.placeholder=h=new s("Placeholder"),h.connectRuntime({runtimeOrder:"html5"},function(){r._ruid=h.getRuid(),i.resolve()}),i.promise()},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&u.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;e=t._wrapFile(e);if(!t.owner.trigger("beforeFileQueued",e))return;if(!t.acceptFile(e)){t.owner.trigger("error","Q_TYPE_DENIED",e);return}return t.queue.append(e),t.owner.trigger("fileQueued",e),e},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=o.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n=this,r,i,s;if(e){e=e.id?e:n.queue.getFile(e),e.setStatus(a.QUEUED),t||n.request("start-upload");return}r=n.queue.getFiles(a.ERROR),i=0,s=r.length;for(;i<s;i++)e=r[i],e.setStatus(a.QUEUED);n.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e=this.options.runtimeOrder||t.orders,n=this.type,r,i;if(!n){e=e.split(/\s*,\s*/g);for(r=0,i=e.length;r<i;r++)if(t.hasRuntime(e[r])){this.type=n=e[r];break}}return n}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function i(e){var n=this;e=n.options=r.extend(!0,{},i.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var r=e.$;return i.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(i.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){typeof e=="object"?r.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){typeof e=="object"?r.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;if(!t)return;clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t)}}),n.installTo(i.prototype),i}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,r){function u(e,t){var n=[],r=e.source,i=r.size,s=t?Math.ceil(i/t):1,o=0,u=0,a,f;f={file:e,has:function(){return!!n.length},shift:function(){return n.shift()},unshift:function(e){n.unshift(e)}};while(u<s)a=Math.min(t,i-o),n.push({file:e,start:o,end:t?o+a:i,total:i,chunks:s,chunk:u++,cuted:f}),o+=a;return e.blocks=n.concat(),e.remaning=n.length,f}var i=e.$,s=e.isPromise,o=n.Status;i.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&i.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;i.each(n.request("get-files",o.INVALID),function(){n.request("remove-file",this)});if(t){t=t.id?t:n.request("get-file",t);if(t.getStatus()===o.INTERRUPT)i.each(n.pool,function(e,n){if(n.file!==t)return;n.transport&&n.transport.send()}),t.setStatus(o.QUEUED);else{if(t.getStatus()===o.PROGRESS)return;t.setStatus(o.QUEUED)}}else i.each(n.request("get-files",[o.INITED]),function(){this.setStatus(o.QUEUED)});if(n.runing)return;n.runing=!0;var r=[];i.each(n.pool,function(e,t){var i=t.file;i.getStatus()===o.INTERRUPT&&(r.push(i),n._trigged=!1,t.transport&&t.transport.send())});var t;while(t=r.shift())t.setStatus(o.PROGRESS);t||i.each(n.request("get-files",o.INTERRUPT),function(){this.setStatus(o.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")},stopUpload:function(t,n){var r=this;t===!0&&(n=t,t=null);if(r.runing===!1)return;if(t){t=t.id?t:r.request("get-file",t);if(t.getStatus()!==o.PROGRESS&&t.getStatus()!==o.QUEUED)return;return t.setStatus(o.INTERRUPT),i.each(r.pool,function(e,n){if(n.file!==t)return;n.transport&&n.transport.abort(),r._putback(n),r._popBlock(n)}),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(o.INTERRUPT),n&&i.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(o.INTERRUPT)}),r.owner.trigger("stopUpload")},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&i.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(o.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||o.COMPLETE),e.skipped=!0,e.blocks&&i.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t=this,n=t.options,r,i;if(t._promise)return t._promise.always(t.__tick);t.pool.length<n.threads&&(i=t._nextBlock())?(t._trigged=!1,r=function(n){t._promise=null,n&&n.file&&t._startSend(n),e.nextTick(t.__tick)},t._promise=s(i)?i.always(r):r(i)):!t.remaning&&!t._getStats().numOfQueue&&!t._getStats().numofInterrupt&&(t.runing=!1,t._trigged||e.nextTick(function(){t.owner.trigger("uploadFinished")}),t._trigged=!0)},_putback:function(e){var t;e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),~t||this.stack.unshift(e.cuted)},_getStack:function(){var e=0,t;while(t=this.stack[e++]){if(t.has()&&t.file.getStatus()===o.PROGRESS)return t;(!t.has()||t.file.getStatus()!==o.PROGRESS&&t.file.getStatus()!==o.INTERRUPT)&&this.stack.splice(--e,1)}return null},_nextBlock:function(){var e=this,t=e.options,n,r,i,o;if(n=this._getStack())return t.prepareNextFile&&!e.pending.length&&e._prepareNextFile(),n.shift();if(e.runing)return!e.pending.length&&e._getStats().numOfQueue&&e._prepareNextFile(),r=e.pending.shift(),i=function(r){return r?(n=u(r,t.chunked?t.chunkSize:0),e.stack.push(n),n.shift()):null},s(r)?(o=r.file,r=r[r.pipe?"pipe":"then"](i),r.file=o,r):i(r)},_prepareNextFile:function(){var e=this,t=e.request("fetch-file"),n=e.pending,r;t&&(r=e.request("before-send-file",t,function(){return t.getStatus()===o.PROGRESS||t.getStatus()===o.INTERRUPT?t:e._finishFile(t)}),e.owner.trigger("uploadStart",t),t.setStatus(o.PROGRESS),r.file=t,r.done(function(){var e=i.inArray(r,n);~e&&n.splice(e,1,t)}),r.fail(function(n){t.setStatus(o.ERROR,n),e.owner.trigger("uploadError",t,n),e.owner.trigger("uploadComplete",t)}),n.push(r))},_popBlock:function(e){var t=i.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n=this,r=t.file,i;if(r.getStatus()!==o.PROGRESS){r.getStatus()===o.INTERRUPT&&n._putback(t);return}n.pool.push(t),n.remaning++,t.blob=t.chunks===1?r.source:r.source.slice(t.start,t.end),i=n.request("before-send",t,function(){r.getStatus()===o.PROGRESS?n._doSend(t):(n._popBlock(t),e.nextTick(n.__tick))}),i.fail(function(){r.remaning===1?n._finishFile(r).always(function(){t.percentage=1,n._popBlock(t),n.owner.trigger("uploadComplete",r),e.nextTick(n.__tick)}):(t.percentage=1,n.updateFileProgress(r),n._popBlock(t),e.nextTick(n.__tick))})},_doSend:function(t){var n=this,s=n.owner,u=n.options,a=t.file,f=new r(u),l=i.extend({},u.formData),c=i.extend({},u.headers),h,p;t.transport=f,f.on("destroy",function(){delete t.transport,n._popBlock(t),e.nextTick(n.__tick)}),f.on("progress",function(e){t.percentage=e,n.updateFileProgress(a)}),h=function(e){var n;return p=f.getResponseAsJson()||{},p._raw=f.getResponse(),n=function(t){e=t},s.trigger("uploadAccept",t,p,n)||(e=e||"server"),e},f.on("error",function(e,n){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<u.chunkRetry?(t.retried++,f.send()):(!n&&e==="server"&&(e=h(e)),a.setStatus(o.ERROR,e),s.trigger("uploadError",a,e),s.trigger("uploadComplete",a))}),f.on("load",function(){var e;if(e=h()){f.trigger("error",e,!0);return}a.remaning===1?n._finishFile(a,p):f.destroy()}),l=i.extend(l,{id:a.id,name:a.name,type:a.type,lastModifiedDate:a.lastModifiedDate,size:a.size}),t.chunks>1&&i.extend(l,{chunks:t.chunks,chunk:t.chunk}),s.trigger("uploadBeforeSend",t,l,c),f.appendBlob(u.fileVal,t.blob,a.name),f.append(l),f.setRequestHeader(c),f.send()},_finishFile:function(e,t,n){var r=this.owner;return r.request("after-send-file",arguments,function(){e.setStatus(o.COMPLETE),r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===o.PROGRESS&&e.setStatus(o.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,n=0;if(!e.blocks)return;i.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0)}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r=e.$,i={},s;return s={addValidator:function(e,t){i[e]=t},removeValidator:function(e){delete i[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){r.each(i,function(){this.call(t.owner)})})}}),s.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;if(!r)return;e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),n>=r?!1:!0}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0})}),s.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;if(!r)return;e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),t?!1:!0}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0})}),s.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;if(!r)return;e.on("beforeFileQueued",function(e){if(e.size>r)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1})}),s.addValidator("duplicate",function(){function r(e){var t=0,n=0,r=e.length,i;for(;n<r;n++)i=e.charCodeAt(n),t=i+(t<<6)+(t<<16)-t;return t}var e=this,t=e.options,n={};if(t.duplicate)return;e.on("beforeFileQueued",function(e){var t=e.__hash||(e.__hash=r(e.name+e.size+e.lastModifiedDate));if(n[t])return this.trigger("error","F_DUPLICATE",e),!1}),e.on("fileQueued",function(e){var t=e.__hash;t&&(n[t]=!0)}),e.on("fileDequeued",function(e){var t=e.__hash;t&&delete n[t]}),e.on("reset",function(){n={}})}),s}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,i,s){var o=new n,u=e.Deferred(),a=t instanceof r?t:this.request("get-file",t).source;return o.on("progress load",function(e){e=e||{},u.notify(e.total?e.loaded/e.total:1)}),o.on("complete",function(){u.resolve(o.getResult())}),o.on("error",function(e){u.reject(e)}),arguments.length>1&&(i=i||0,s=s||0,i<0&&(i=a.size+i),s<0&&(s=a.size+s),s=Math.min(s,a.size),a=a.slice(i,s)),o.loadFromBlob(a),u.promise()}})}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function o(){var e={},r=this,o=this.destroy;n.apply(r,arguments),r.type=i,r.exec=function(n,i){var o=this,u=o.uid,a=t.slice(arguments,2),f;if(s[n]){f=e[u]=e[u]||new s[n](o,r);if(f[i])return f[i].apply(f,a)}},r.destroy=function(){return o&&o.apply(this,arguments)}}var i="html5",s={};return t.inherits(n,{constructor:o,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),o.register=function(e,n){var i=s[e]=t.inherits(r,n);return i},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(i,o),o}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source,i=r.slice||r.webkitSlice||r.mozSlice;return r=i.call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t=this,n=t._denied||!1,r;return e=e.originalEvent||e,t.dndOver||(t.dndOver=!0,r=e.dataTransfer.items,r&&r.length&&(t._denied=n=!t.trigger("accept",r)),t.elem.addClass(i+"over"),t.elem[n?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=n?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!r.contains(t,e.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e=this,t;return t=function(){e.dndOver=!1,e.elem.removeClass(i+"over "+i+"denied")},clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(e){var t=this,s=t.getRuid(),o=t.elem.parent().get(0),u,a;if(o&&!r.contains(o,e.currentTarget))return!1;e=e.originalEvent||e,u=e.dataTransfer;try{a=u.getData("text/html")}catch(f){}if(a)return;return t._getTansferFiles(u,function(e){t.trigger("drop",r.map(e,function(e){return new n(s,e)}))}),t.dndOver=!1,t.elem.removeClass(i+"over"),!1},_getTansferFiles:function(t,n){var r=[],i=[],s,o,u,a,f,l,c;s=t.items,o=t.files,c=!!s&&!!s[0].webkitGetAsEntry;for(f=0,l=o.length;f<l;f++)u=o[f],a=s&&s[f],c&&a.webkitGetAsEntry().isDirectory?i.push(this._traverseDirectoryTree(a.webkitGetAsEntry(),r)):r.push(u);e.when.apply(e,i).done(function(){if(!r.length)return;n(r)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var s=t.length,o=[],u=[],a;for(a=0;a<s;a++)o.push(i._traverseDirectoryTree(t[a],u));e.when.apply(e,o).then(function(){n.push.apply(n,u),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;if(!e)return;e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t=this.options,n=this.elem=t.container,r=".*",i,s,o,u;if(t.accept){i=[];for(s=0,o=t.accept.length;s<o;s++)u=t.accept[s].mimeTypes,u&&i.push(u);i.length&&(r=i.join(","),r=r.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=r=new RegExp(r,"i"),this.hander=e.bindFn(this._pasteHander,this),n.on("paste",this.hander)},_pasteHander:function(e){var t=[],r=this.getRuid(),i,s,o,u,a;e=e.originalEvent||e,i=e.clipboardData.items;for(u=0,a=i.length;u<a;u++){s=i[u];if(s.kind!=="file"||!(o=s.getAsFile()))continue;t.push(new n(r,o))}t.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",t))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e=this.getRuntime().getContainer(),t=this,r=t.owner,i=t.options,s=this.label=n(document.createElement("label")),o=this.input=n(document.createElement("input")),u,a,f,l;o.attr("type","file"),o.attr("name",i.name),o.addClass("webuploader-element-invisible visuallyhidden"),o.css("display","block"),s.on("click",function(){o.trigger("click")}),s.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),i.multiple&&o.attr("multiple","multiple");if(i.accept&&i.accept.length>0){u=[];for(a=0,f=i.accept.length;a<f;a++)u.push(i.accept[a].mimeTypes);o.attr("accept",u.join(","))}e.append(o),e.append(s),l=function(e){r.trigger(e.type)},o.on("change",function(e){var i=arguments.callee,s;t.files=e.target.files,s=this.cloneNode(!0),s.value=null,this.parentNode.replaceChild(s,this),o.off(),o=n(s).on("change",i).on("mouseenter mouseleave",l),r.trigger("change")}),s.on("mouseenter mouseleave",l)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,s,o;o=e.split(","),~o[0].indexOf("base64")?t=atob(o[1]):t=decodeURIComponent(o[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r);for(i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return s=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,s)},dataURL2ArrayBuffer:function(e){var t,n,r,i;i=e.split(","),~i[0].indexOf("base64")?t=atob(i[1]):t=decodeURIComponent(i[1]),n=new Uint8Array(t.length);for(r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r=e.BlobBuilder||e.WebKitBlobBuilder,i;return r?(i=new r,i.append(t),i.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(e.byteLength<6)return;var r=new DataView(e),i=2,s=r.byteLength-4,o=i,u={},a,f,l,c;if(r.getUint16(0)===65496){while(i<s){a=r.getUint16(i);if(!(a>=65504&&a<=65519||a===65534))break;f=r.getUint16(i+2)+2;if(i+f>r.byteLength)break;l=t.parsers[a];if(!n&&l)for(c=0;c<l.length;c+=1)l[c].call(t,r,i,f,u);i+=f,o=i}o>6&&(e.slice?u.imageHead=e.slice(2,o):u.imageHead=(new Uint8Array(e)).subarray(2,o))}return u},updateImageHead:function(e,t){var n=this._parse(e,!0),r,i,s;return s=2,n.imageHead&&(s=2+n.imageHead.byteLength),e.slice?i=e.slice(s):i=(new Uint8Array(e)).subarray(s),r=new Uint8Array(t.byteLength+2+i.byteLength),r[0]=255,r[1]=216,r.set(new Uint8Array(t),2),r.set(new Uint8Array(i),t.byteLength+2),r.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,s,o,u){var a=n.exifTagTypes[s],f,l,c,h,p,d;if(!a){e.log("Invalid Exif data: Invalid tag type.");return}f=a.size*o,l=f>4?r+t.getUint32(i+8,u):i+8;if(l+f>t.byteLength){e.log("Invalid Exif data: Invalid data offset.");return}if(o===1)return a.getValue(t,l,u);c=[];for(h=0;h<o;h+=1)c[h]=a.getValue(t,l+h*a.size,u);if(a.ascii){p="";for(h=0;h<c.length;h+=1){d=c[h];if(d==="\0")break;p+=d}return p}return c},n.parseExifTag=function(e,t,r,i,s){var o=e.getUint16(r,i);s.exif[o]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,s){var o,u,a;if(r+6>t.byteLength){e.log("Invalid Exif data: Invalid directory offset.");return}o=t.getUint16(r,i),u=r+2+12*o;if(u+4>t.byteLength){e.log("Invalid Exif data: Invalid directory size.");return}for(a=0;a<o;a+=1)this.parseExifTag(t,n,r+2+12*a,i,s);return t.getUint32(u,i)},n.parseExifData=function(t,r,i,s){var o=r+10,u,a;if(t.getUint32(r+4)!==1165519206)return;if(o+8>t.byteLength){e.log("Invalid Exif data: Invalid segment size.");return}if(t.getUint16(r+8)!==0){e.log("Invalid Exif data: Missing byte alignment offset.");return}switch(t.getUint16(o)){case 18761:u=!0;break;case 19789:u=!1;break;default:e.log("Invalid Exif data: Invalid byte alignment marker.");return}if(t.getUint16(o+2,u)!==42){e.log("Invalid Exif data: Missing TIFF marker.");return}a=t.getUint32(o+4,u),s.exif=new n.ExifMap,a=n.parseExifTags(t,o,o+a,u,s)},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(e,t,n){function r(e){function P(e){var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var n=0;n<64;n++){var a=r((t[n]*e+50)/100);a<1?a=1:a>255&&(a=255),i[N[n]]=a}var f=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var l=0;l<64;l++){var c=r((f[l]*e+50)/100);c<1?c=1:c>255&&(c=255),s[N[l]]=c}var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0;for(var d=0;d<8;d++)for(var v=0;v<8;v++)o[p]=1/(i[N[p]]*h[d]*h[v]*8),u[p]=1/(s[N[p]]*h[d]*h[v]*8),p++}function H(e,t){var n=0,r=0,i=new Array;for(var s=1;s<=16;s++){for(var o=1;o<=e[s];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function B(){a=H(C,k),f=H(O,M),l=H(L,A),c=H(_,D)}function j(){var e=1,t=2;for(var n=1;n<=15;n++){for(var r=e;r<t;r++)p[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)p[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}function F(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}function I(e){var t=e[0],n=e[1]-1;while(n>=0)t&1<<n&&(g|=1<<y),n--,y--,y<0&&(g==255?(q(255),q(0)):q(g),y=7,g=0)}function q(e){m.push(S[e])}function R(e){q(e>>8&255),q(e&255)}function U(e,t){var n,r,i,s,o,u,a,f,l=0,c,h=8,p=64;for(c=0;c<h;++c){n=e[l],r=e[l+1],i=e[l+2],s=e[l+3],o=e[l+4],u=e[l+5],a=e[l+6],f=e[l+7];var v=n+f,m=n-f,g=r+a,y=r-a,b=i+u,w=i-u,E=s+o,S=s-o,x=v+E,T=v-E,N=g+b,C=g-b;e[l]=x+N,e[l+4]=x-N;var k=(C+T)*.707106781;e[l+2]=T+k,e[l+6]=T-k,x=S+w,N=w+y,C=y+m;var L=(x-C)*.382683433,A=.5411961*x+L,O=1.306562965*C+L,M=N*.707106781,_=m+M,D=m-M;e[l+5]=D+A,e[l+3]=D-A,e[l+1]=_+O,e[l+7]=_-O,l+=8}l=0;for(c=0;c<h;++c){n=e[l],r=e[l+8],i=e[l+16],s=e[l+24],o=e[l+32],u=e[l+40],a=e[l+48],f=e[l+56];var P=n+f,H=n-f,B=r+a,j=r-a,F=i+u,I=i-u,q=s+o,R=s-o,U=P+q,z=P-q,W=B+F,X=B-F;e[l]=U+W,e[l+32]=U-W;var V=(X+z)*.707106781;e[l+16]=z+V,e[l+48]=z-V,U=R+I,W=I+j,X=j+H;var $=(U-X)*.382683433,J=.5411961*U+$,K=1.306562965*X+$,Q=W*.707106781,G=H+Q,Y=H-Q;e[l+40]=Y+J,e[l+24]=Y-J,e[l+8]=G+K,e[l+56]=G-K,l++}var Z;for(c=0;c<p;++c)Z=e[c]*t[c],d[c]=Z>0?Z+.5|0:Z-.5|0;return d}function z(){R(65504),R(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),R(1),R(1),q(0),q(0)}function W(e,t){R(65472),R(17),q(8),R(t),R(e),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}function X(){R(65499),R(132),q(0);for(var e=0;e<64;e++)q(i[e]);q(1);for(var t=0;t<64;t++)q(s[t])}function V(){R(65476),R(418),q(0);for(var e=0;e<16;e++)q(C[e+1]);for(var t=0;t<=11;t++)q(k[t]);q(16);for(var n=0;n<16;n++)q(L[n+1]);for(var r=0;r<=161;r++)q(A[r]);q(1);for(var i=0;i<16;i++)q(O[i+1]);for(var s=0;s<=11;s++)q(M[s]);q(17);for(var o=0;o<16;o++)q(_[o+1]);for(var u=0;u<=161;u++)q(D[u])}function $(){R(65498),R(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0)}function J(e,t,n,r,i){var s=i[0],o=i[240],u,a=16,f=63,l=64,c=U(e,t);for(var d=0;d<l;++d)v[N[d]]=c[d];var m=v[0]-n;n=v[0],m==0?I(r[0]):(u=32767+m,I(r[p[u]]),I(h[u]));var g=63;for(;g>0&&v[g]==0;g--);if(g==0)return I(s),n;var y=1,b;while(y<=g){var w=y;for(;v[y]==0&&y<=g;++y);var E=y-w;if(E>=a){b=E>>4;for(var S=1;S<=b;++S)I(o);E&=15}u=32767+v[y],I(i[(E<<4)+p[u]]),I(h[u]),y++}return g!=f&&I(s),n}function K(){var e=String.fromCharCode;for(var t=0;t<256;t++)S[t]=e(t)}function Q(e){e<=0&&(e=1),e>100&&(e=100);if(T==e)return;var t=0;e<50?t=Math.floor(5e3/e):t=Math.floor(200-e*2),P(t),T=e}function G(){e||(e=50),K(),B(),j(),F(),Q(e)}var t=this,n=Math.round,r=Math.floor,i=new Array(64),s=new Array(64),o=new Array(64),u=new Array(64),a,f,l,c,h=new Array(65535),p=new Array(65535),d=new Array(64),v=new Array(64),m=[],g=0,y=7,b=new Array(64),w=new Array(64),E=new Array(64),S=new Array(256),x=new Array(2048),T,N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&Q(t),m=new Array,g=0,y=7,R(65496),z(),X(),W(e.width,e.height),V(),$();var n=0,r=0,i=0;g=0,y=7,this.encode.displayName="_encode_";var s=e.data,h=e.width,p=e.height,d=h*4,v=h*3,S,T=0,N,C,k,L,A,O,M,_;while(T<p){S=0;while(S<d){L=d*T+S,A=L,O=-1,M=0;for(_=0;_<64;_++)M=_>>3,O=(_&7)*4,A=L+M*d+O,T+M>=p&&(A-=d*(T+1+M-p)),S+O>=d&&(A-=S+O-d+4),N=s[A++],C=s[A++],k=s[A++],b[_]=(x[N]+x[C+256>>0]+x[k+512>>0]>>16)-128,w[_]=(x[N+768>>0]+x[C+1024>>0]+x[k+1280>>0]>>16)-128,E[_]=(x[N+1280>>0]+x[C+1536>>0]+x[k+1792>>0]>>16)-128;n=J(b,o,n,a,l),r=J(w,u,r,f,c),i=J(E,u,i,f,c),S+=32}T+=8}if(y>=0){var D=[];D[1]=y+1,D[0]=(1<<y+1)-1,I(D)}R(65497);var P="data:image/jpeg;base64,"+btoa(m.join(""));return m=[],P},G()}return r.encode=function(e,t){var n=new r(t);return n.encode(e)},r}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r=e.canvasToDataUrl,i;e.canvasToDataUrl=function(e,s,o){var u,a,f,l,c;return n.os.android?(s==="image/jpeg"&&typeof i=="undefined"&&(l=r.apply(null,arguments),c=l.split(","),~c[0].indexOf("base64")?l=atob(c[1]):l=decodeURIComponent(c[1]),l=l.substring(0,2),i=l.charCodeAt(0)===255&&l.charCodeAt(1)===216),s==="image/jpeg"&&!i?(a=e.width,f=e.height,u=e.getContext("2d"),t.encode(u.getImageData(0,0,a,f),o)):r.apply(null,arguments)):r.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},!e._metas&&"image/jpeg"===e.type?n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")}):e.owner.trigger("load")},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var s=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,u=this._img,a=u.naturalWidth,f=u.naturalHeight,l=this.getOrientation();i=i||1,s.width=n,s.height=r,o.preserveHeaders||this._rotate2Orientaion(s,l),this._renderImageToCanvas(s,u,-e,-t,a*i,f*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t=this._blob,r=this.options,i;e=e||this.type;if(this.modified||this.type!==e){i=this._canvas;if(e==="image/jpeg"){t=n.canvasToDataUrl(i,e,r.quality);if(r.preserveHeaders&&this._metas&&this._metas.imageHead)return t=n.dataURL2ArrayBuffer(t),t=n.updateImageHead(t,this._metas.imageHead),t=n.arrayBufferToBlob(t,e),t}else t=n.canvasToDataUrl(i,e);t=n.dataURL2Blob(t)}return t},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,e==="image/jpeg"?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=r,this._img=this._blob=null},_resize:function(e,t,n,r){var i=this.options,s=e.width,o=e.height,u=this.getOrientation(),a,f,l,c,h;~[5,6,7,8].indexOf(u)&&(n^=r,r^=n,n^=r),a=Math[i.crop?"max":"min"](n/s,r/o),i.allowMagnify||(a=Math.min(1,a)),f=s*a,l=o*a,i.crop?(t.width=n,t.height=r):(t.width=f,t.height=l),c=(t.width-f)/2,h=(t.height-l)/2,i.preserveHeaders||this._rotate2Orientaion(t,u),this._renderImageToCanvas(t,e,c,h,f,l)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-0.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r=document.createElement("canvas"),i=r.getContext("2d"),s=0,o=n,u=n,a,f,l;r.width=1,r.height=n,i.drawImage(e,0,0),a=i.getImageData(0,0,1,n).data;while(u>s)f=a[(u-1)*4+3],f===0?o=u:s=u,u=o+s>>1;return l=u/n,l===0?1:l}function n(e){var t=e.naturalWidth,n=e.naturalHeight,r,i;return t*n>1048576?(r=document.createElement("canvas"),r.width=r.height=1,i=r.getContext("2d"),i.drawImage(e,-t+1,0),i.getImageData(0,0,1,1).data[3]===0):!1}return e.os.ios?e.os.ios>=7?function(e,n,r,i,s,o){var u=n.naturalWidth,a=n.naturalHeight,f=t(n,u,a);return e.getContext("2d").drawImage(n,0,0,u*f,a*f,r,i,s,o)}:function(e,r,i,s,o,u){var a=r.naturalWidth,f=r.naturalHeight,l=e.getContext("2d"),c=n(r),h=this.type==="image/jpeg",p=1024,d=0,v=0,m,g,y,b,w,E,S;c&&(a/=2,f/=2),l.save(),m=document.createElement("canvas"),m.width=m.height=p,g=m.getContext("2d"),y=h?t(r,a,f):1,b=Math.ceil(p*o/a),w=Math.ceil(p*u/f/y);while(d<f){E=0,S=0;while(E<a)g.clearRect(0,0,p,p),g.drawImage(r,-E,-d),l.drawImage(m,0,0,p,p,i+S,s+v,b,w),E+=p,S+=b;d+=p,v+=w}l.restore(),m=g=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t=this.owner,n=this.options,i=this._initAjax(),s=t._blob,o=n.server,u,a,f;n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+r.param(t._formData),a=s.getSource()):(u=new FormData,r.each(t._formData,function(e,t){u.append(e,t)}),u.append(n.fileVal,s.getSource(),n.filename||t._formData.name||"")),n.withCredentials&&"withCredentials"in i?(i.open(n.method,o,!0),i.withCredentials=!0):i.open(n.method,o),this._setRequestHeader(i,n.headers),a?(i.overrideMimeType&&i.overrideMimeType("application/octet-stream"),e.os.android?(f=new FileReader,f.onload=function(){i.send(this.result),f=f.onload=null},f.readAsArrayBuffer(a)):i.send(a)):i.send(u)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,r=this.options;return r.withCredentials&&!("withCredentials"in t)&&typeof XDomainRequest!="undefined"&&(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){if(t.readyState!==4)return;return t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,s,o){return n=t(t(n,e),t(i,o)),t(n<<s|n>>>32-s,r)},r=function(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)},i=function(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)},s=function(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)},o=function(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)},u=function(e,n){var u=e[0],a=e[1],f=e[2],l=e[3];u=r(u,a,f,l,n[0],7,-680876936),l=r(l,u,a,f,n[1],12,-389564586),f=r(f,l,u,a,n[2],17,606105819),a=r(a,f,l,u,n[3],22,-1044525330),u=r(u,a,f,l,n[4],7,-176418897),l=r(l,u,a,f,n[5],12,1200080426),f=r(f,l,u,a,n[6],17,-1473231341),a=r(a,f,l,u,n[7],22,-45705983),u=r(u,a,f,l,n[8],7,1770035416),l=r(l,u,a,f,n[9],12,-1958414417),f=r(f,l,u,a,n[10],17,-42063),a=r(a,f,l,u,n[11],22,-1990404162),u=r(u,a,f,l,n[12],7,1804603682),l=r(l,u,a,f,n[13],12,-40341101),f=r(f,l,u,a,n[14],17,-1502002290),a=r(a,f,l,u,n[15],22,1236535329),u=i(u,a,f,l,n[1],5,-165796510),l=i(l,u,a,f,n[6],9,-1069501632),f=i(f,l,u,a,n[11],14,643717713),a=i(a,f,l,u,n[0],20,-373897302),u=i(u,a,f,l,n[5],5,-701558691),l=i(l,u,a,f,n[10],9,38016083),f=i(f,l,u,a,n[15],14,-660478335),a=i(a,f,l,u,n[4],20,-405537848),u=i(u,a,f,l,n[9],5,568446438),l=i(l,u,a,f,n[14],9,-1019803690),f=i(f,l,u,a,n[3],14,-187363961),a=i(a,f,l,u,n[8],20,1163531501),u=i(u,a,f,l,n[13],5,-1444681467),l=i(l,u,a,f,n[2],9,-51403784),f=i(f,l,u,a,n[7],14,1735328473),a=i(a,f,l,u,n[12],20,-1926607734),u=s(u,a,f,l,n[5],4,-378558),l=s(l,u,a,f,n[8],11,-2022574463),f=s(f,l,u,a,n[11],16,1839030562),a=s(a,f,l,u,n[14],23,-35309556),u=s(u,a,f,l,n[1],4,-1530992060),l=s(l,u,a,f,n[4],11,1272893353),f=s(f,l,u,a,n[7],16,-155497632),a=s(a,f,l,u,n[10],23,-1094730640),u=s(u,a,f,l,n[13],4,681279174),l=s(l,u,a,f,n[0],11,-358537222),f=s(f,l,u,a,n[3],16,-722521979),a=s(a,f,l,u,n[6],23,76029189),u=s(u,a,f,l,n[9],4,-640364487),l=s(l,u,a,f,n[12],11,-421815835),f=s(f,l,u,a,n[15],16,530742520),a=s(a,f,l,u,n[2],23,-995338651),u=o(u,a,f,l,n[0],6,-198630844),l=o(l,u,a,f,n[7],10,1126891415),f=o(f,l,u,a,n[14],15,-1416354905),a=o(a,f,l,u,n[5],21,-57434055),u=o(u,a,f,l,n[12],6,1700485571),l=o(l,u,a,f,n[3],10,-1894986606),f=o(f,l,u,a,n[10],15,-1051523),a=o(a,f,l,u,n[1],21,-2054922799),u=o(u,a,f,l,n[8],6,1873313359),l=o(l,u,a,f,n[15],10,-30611744),f=o(f,l,u,a,n[6],15,-1560198380),a=o(a,f,l,u,n[13],21,1309151649),u=o(u,a,f,l,n[4],6,-145523070),l=o(l,u,a,f,n[11],10,-1120210379),f=o(f,l,u,a,n[2],15,718787259),a=o(a,f,l,u,n[9],21,-343485551),e[0]=t(u,e[0]),e[1]=t(a,e[1]),e[2]=t(f,e[2]),e[3]=t(l,e[3])},a=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t},f=function(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t},l=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,f,l;for(r=64;r<=t;r+=64)u(n,a(e.substring(r-64,r)));e=e.substring(r-64),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e.charCodeAt(r)<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=f,s[15]=l,u(n,s),n},c=function(e){var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r,i,s,o,a,l;for(r=64;r<=t;r+=64)u(n,f(e.subarray(r-64,r)));e=r-64<t?e.subarray(r-64):new Uint8Array(0),i=e.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i;r+=1)s[r>>2]|=e[r]<<(r%4<<3);s[r>>2]|=128<<(r%4<<3);if(r>55){u(n,s);for(r=0;r<16;r+=1)s[r]=0}return o=t*8,o=o.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),l=parseInt(o[1],16)||0,s[14]=a,s[15]=l,u(n,s),n},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t="",n;for(n=0;n<4;n+=1)t+=h[e>>n*8+4&15]+h[e>>n*8&15];return t},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(e){return d(l(e))},m=function(){this.reset()};return v("hello")!=="5d41402abc4b2a76b9719d911017c592"&&(t=function(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t=this._buff.length,n;for(n=64;n<=t;n+=64)u(this._state,a(this._buff.substring(n-64,n)));return this._buff=this._buff.substr(n-64),this},m.prototype.end=function(e){var t=this._buff,n=t.length,r,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s;for(r=0;r<n;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return this._finish(i,n),s=e?this._state:d(this._state),this.reset(),s},m.prototype._finish=function(e,t){var n=t,r,i,s;e[n>>2]|=128<<(n%4<<3);if(n>55){u(this._state,e);for(n=0;n<16;n+=1)e[n]=0}r=this._length*8,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,e[14]=i,e[15]=s,u(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:d(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:d(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t=this._concatArrayBuffer(this._buff,e),n=t.length,r;this._length+=e.byteLength;for(r=64;r<=n;r+=64)u(this._state,f(t.subarray(r-64,r)));return this._buff=r-64<n?t.subarray(r-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t=this._buff,n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,s;for(i=0;i<n;i+=1)r[i>>2]|=t[i]<<(i%4<<3);return this._finish(r,n),s=e?this._state:d(this._state),this.reset(),s},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:d(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t=e.getSource(),n=2097152,r=Math.ceil(t.size/n),i=0,s=this.owner,o=new m.ArrayBuffer,u=this,a=t.mozSlice||t.webkitSlice||t.slice,f,l;l=new FileReader,f=function(){var c,h;c=i*n,h=Math.min(c+n,t.size),l.onload=function(t){o.append(t.target.result),s.trigger("progress",{total:e.size,loaded:h})},l.onloadend=function(){l.onloadend=l.onload=null,++i<r?setTimeout(f,1):setTimeout(function(){s.trigger("load"),u.result=o.end(),f=e=t=o=null,s.trigger("complete")},50)},l.readAsArrayBuffer(a.call(t,c,h))},f()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function u(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function a(){function l(e,t){var n=e.type||e,r,s;r=n.split("::"),s=r[0],n=r[1],n==="Ready"&&s===a.uid?a.trigger("ready"):i[s]&&i[s].trigger(n.toLowerCase(),e,t)}var r={},i={},u=this.destroy,a=this,f=t.guid("webuploader_");n.apply(a,arguments),a.type=s,a.exec=function(e,n){var s=this,u=s.uid,f=t.slice(arguments,2),l;i[u]=s;if(o[e]){r[u]||(r[u]=new o[e](s,a)),l=r[u];if(l[n])return l[n].apply(l,f)}return a.flashExec.apply(s,arguments)},e[f]=function(){var e=arguments;setTimeout(function(){l.apply(null,e)},1)},this.jsreciver=f,this.destroy=function(){return u&&u.apply(this,arguments)},this.flashExec=function(e,n){var r=a.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var i=t.$,s="flash",o={};return t.inherits(n,{constructor:a,init:function(){var e=this.getContainer(),n=this.options,r;e.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),r='<object id="'+this.uid+'" type="application/'+'x-shockwave-flash" data="'+n.swf+'" ',t.browser.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf+'" />'+'<param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+"</object>",e.html(r)},getFlash:function(){return this._flash?this._flash:(this._flash=i("#"+this.uid).get(0),this._flash)}}),a.register=function(e,n){return n=o[e]=t.inherits(r,i.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n)),n},u()>=11.4&&n.addRuntime(s,a),a}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t=n.extend({},e),r,i;r=t.accept&&t.accept.length;for(i=0;i<r;i++)t.accept[i].title||(t.accept[i].title="Files");delete t.button,delete t.id,delete t.container,this.flashExec("FilePicker","init",t)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e=this.owner,t=this.options,n=this._initAjax(),r=e._blob,s=t.server,o;n.connectRuntime(r.ruid),t.sendAsBinary?(s+=(/\?/.test(s)?"&":"?")+i.param(e._formData),o=r.uid):(i.each(e._formData,function(e,t){n.exec("append",e,t)}),n.exec("appendBlob",t.fileVal,r.uid,t.filename||e._formData.name||"")),this._setRequestHeader(n,t.headers),n.exec("send",{method:t.method,url:s,forceURLStream:t.forceURLStream,mimeType:"application/octet-stream"},o)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r=n.exec("getStatus"),i=!1,s="",o;return n.off(),t._xhr=null,r>=200&&r<300?i=!0:r>=500&&r<600?(i=!0,s="server"):s="http",i&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),o=e.JSON&&e.JSON.parse||function(e){try{return(new Function("return "+e)).call()}catch(t){return{}}},t._responseJson=t._response?o(t._response):{}),n.destroy(),n=null,s?t.trigger("error",s):t.trigger("load")}),n.on("error",function(){n.off(),t._xhr=null,t.trigger("error","http")}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(r.uid,r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("widgets/log",["base","uploader","widgets/widget"],function(e,t){function u(e){var t=n.extend({},o,e),i=r.replace(/^(.*)\?/,"$1"+n.param(t)),s=new Image;s.src=i}var n=e.$,r=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",i=(location.hostname||location.host||"protected").toLowerCase(),s=i&&/baidu/i.exec(i),o;if(!s)return;return o={dv:3,master:"webuploader",online:/test/.exec(i)?0:1,module:"",product:i,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,n=0;e.on("error",function(e){u({type:2,c_error_code:e})}).on("uploadError",function(e,t){u({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,n+=e.size}).on("uploadFinished",function(){u({c_count:t,c_size:n}),t=n=0}),u({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(e){return e}),n("webuploader")}),define("sf.b2c.mall.widget.file.uploader",["jquery","can","webuploader","sf.b2c.mall.business.config"],function(e,t,n,r){return t.Control.extend({init:function(){n.Uploader.support()||alert("图片上传工具，不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器"),this.params={}},setFileVal:function(e){this.uploader.option("fileVal",e)},config:function(e,t){this.uploader=n.create({auto:!0,swf:"scripts/Uploader.swf",server:r.setting.api.fileurl+"?_aid=1",accept:{title:"Images",extensions:"jpg,jpeg,bmp,png",mimeTypes:"image/*"},fileSingleSizeLimit:10485760}),this.uploader.addButton({id:e.pick});var i=this;this.uploader.on("uploadSuccess",t.onUploadSuccess),this.uploader.on("uploadError",t.onUploadError),this.uploader.on("uploadBeforeSend",t.onUploadBeforeSend),this.uploader.on("fileQueued",function(e){i.uploader.trigger("startUpload")}),this.uploader.on("error",t.onError)},reset:function(){this.uploader.reset()}})}),define("sf.b2c.mall.widget.loading",["jquery","can"],function(e,t){return t.Control.extend({init:function(){},render:function(){var e=t.view("templates/widget/sf.b2c.mall.widget.loading.mustache",{});this.element.html(e)},show:function(){this.render(),this.bind()},hide:function(){this.unbind(),this.element.empty()},loading:function(){this.element.find(".icon-loading1").animate({height:"156px"},2e3,"linear",function(){e(this).height(0)})},bind:function(){this.loading(),this.handler=setInterval(_.bind(this.loading,this),2e3)},unbind:function(){this.handler&&clearInterval(this.handler)}})}),define("sf.b2c.mall.order.fn",["jquery","can","underscore","sf.b2c.mall.api.order.requestPayV2"],function(e,t,n,r){var i=new r;return{payV2:function(e,t){i.setData({orderId:e.orderid,payType:"alipay"}),i.sendRequest().done(function(e){window.location.href=e.url+"?"+e.postBody,t&&n.isFunction(t.success)&&t.success()}).fail(function(e){t&&n.isFunction(t.error)&&t.error()})}}}),define("sf.b2c.mall.widget.message",["jquery","can"],function(e,t){return t.Control.extend({init:function(e,t){this.data={},this.data.type=this.options.type,this.data.tip=this.options.tip,this.data.okFunction=typeof this.options.okFunction!="undefined"?this.options.okFunction:null,this.data.closeFunction=typeof this.options.closeFunction!="undefined"?this.options.closeFunction:null,this.data.buttons=this.buttonsMap[this.data.type],this.render()},render:function(){this.setup(e("body")),this.options.html=t.view("templates/widget/sf.b2c.mall.widget.message.mustache",this.data),e("body").append(this.options.html)},buttonsMap:{confirm:'<a href="javascript:void(0)" class="btn btn-send" id="ok">确定</a><a href="javascript:void(0)" class="btn btn-cancel" id="cancel">取消</a>',error:'<a href="javascript:void(0)" class="btn btn-send" id="ok">确定</a>',success:'<a href="javascript:void(0)" class="btn btn-send" id="ok">确定</a>'},"#close click":function(){return this.close(),!1},"#ok click":function(){return typeof this.data.okFunction!="undefined"&&this.data.okFunction!=null&&this.data.okFunction.apply(this),this.close(),!1},"#cancel click":function(){return typeof this.data.closeFunction!="undefined"&&this.data.closeFunction!=null&&this.data.closeFunction.apply(this),this.close(),!1},close:function(){e("#messagedialog").remove(),this.destroy()}})}),define("sf.b2c.mall.order.orderdetailcontent",["can","sf.b2c.mall.api.order.getOrder","sf.helpers","webuploader","sf.b2c.mall.widget.file.uploader","sf.b2c.mall.widget.loading","sf.b2c.mall.framework.comm","sf.util","sf.b2c.mall.business.config","sf.b2c.mall.api.user.updateReceiverInfo","sf.b2c.mall.api.user.getIDCardUrlList","sf.b2c.mall.order.fn","sf.b2c.mall.api.sc.getUserRoutes","sf.b2c.mall.api.user.getRecvInfo","sf.b2c.mall.widget.message","moment","sf.b2c.mall.api.order.confirmReceive"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){return e.Control.extend({defaults:{steps:["SUBMITED","AUDITING","WAIT_SHIPPING","SHIPPING","COMPLETED"]},init:function(e,t){this.component={},this.render(),$("#closeExample")[0].onclick=function(){return $(".orderdetail-upload").hide(),$(".mask2").hide(),!1}},render:function(n){var r=this,i=e.deparam(window.location.search.substr(1)),o=new t({orderId:i.orderid}),u=new p({recId:i.recid}),a=new h({bizId:i.orderid});this.options.userRoutes=new Array,e.when(o.sendRequest(),u.sendRequest(),a.sendRequest()).done(function(t,n,i){r.options.orderId=t.orderId,r.options.recId=t.orderItem.rcvrId,r.options.status=r.statsMap[t.orderItem.orderStatus],r.options.nextStep=r.optionHTML[r.nextStepMap[t.orderItem.orderStatus]],r.options.currentStepTips=r.currentStepTipsMap[t.orderItem.orderStatus],r.options.showStep=!0;if(t.orderItem.orderStatus=="AUTO_CANCEL"||t.orderItem.orderStatus=="USER_CANCEL"||t.orderItem.orderStatus=="OPERATION_CANCEL")r.options.showStep=!1;r.options.user=new e.Map,r.options.IDCard={},r.options.IDCard.needUpload=t.orderItem.rcvrState==0||t.orderItem.rcvrState==1||t.orderItem.rcvrState==3,r.options.IDCard.state=t.orderItem.rcvrState,r.options.IDCard.needUpload&&($("#uploadidcard").show(),r.options.currentStepTips=r.cardTipsMap[n.status]||"",r.options.currentStatus=r.cardStatusMap[n.status]||""),r.options.traceList=t.orderActionTraceItemList;var o={SUBMITED:function(e){r.options.submitedTime=e.gmtHappened,r.options.submitedActive="active"},AUDITING:function(e){r.options.auditingTime=e.gmtHappened,r.options.auditingActive="active"},BUYING:function(e){},WAIT_SHIPPING:function(e){},SHIPPING:function(e){r.options.wait_shippingTime=e.gmtHappened,r.options.wait_shippingActive="active"},SHIPPED:function(e){r.options.shippingTime=e.gmtHappened,r.options.shippingActive="active"},COMPLETED:function(e){r.options.completedTime=e.gmtHappened,r.options.completedActive="active"},AUTO_COMPLETED:function(e){r.options.completedTime=e.gmtHappened,r.options.completedActive="active"}};_.each(r.options.traceList,function(e){e.operator=r.operatorMap[e.operator]||"系统",e.description=r.statusDescription[e.status],typeof o[e.status]!="undefined"&&o[e.status].call(r,e)}),_.each(r.options.traceList,function(e){e.status!="COMPLETED"&&e.status!="AUTO_COMPLETED"&&r.options.userRoutes.push(e)}),i&&i.value&&_.each(i.value,function(e){typeof e.carrierCode!="undefined"&&e.carrierCode=="SF"&&r.options.userRoutes.push({gmtHappened:v(e.eventTime).format("YYYY/MM/DD HH:mm:ss"),description:(typeof e.position!="undefined"?e.position:"")+" "+e.remark,operator:"系统"})}),_.each(r.options.traceList,function(e){(e.status=="COMPLETED"||e.status=="AUTO_COMPLETED")&&r.options.userRoutes.push(e)}),r.options.receiveInfo=t.orderItem.orderAddressItem,r.options.receiveInfo.certNo=n.credtNum,r.options.productList=t.orderItem.orderGoodsItemList,_.each(r.options.productList,function(e){e.totalPrice=e.price*e.quantity,typeof r.options.productList[0].spec!="undefined"&&(e.spec=r.options.productList[0].spec.split(",").join("&nbsp;/&nbsp;")),e.imageUrl==""||e.imageUrl==null?e.imageUrl="http://www.sfht.com/img/no.png":e.imageUrl=JSON.parse(e.imageUrl)[0]}),r.options.allTotalPrice=r.options.productList[0].totalPrice;var u=new Array;u.push("AUTO_CANCEL"),u.push("USER_CANCEL"),u.push("OPERATION_CANCEL"),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),r.options.showShouldPayPrice=u.indexOf(t.orderItem.orderStatus)===-1,r.options.showTax=r.options.productList[0].bonded,r.options.shouldPayPrice=r.options.allTotalPrice;var a=e.view("templates/order/sf.b2c.mall.order.orderdetail.mustache",r.options);r.element.html(a),r.options.IDCard.needUpload&&(r.component.loading=new s(".sf-b2c-mall-loading"),r.setPhotoP(),r.setPhotoN(),null!=n.credtImgUrl1&&""!=n.credtImgUrl1&&(r.options.user.attr("credtImgUrl1",n.credtImgUrl1),$("#file-submit-input-photo-p img").attr("src",r.getUserPhotoUrl({n:n.credtImgUrl1}))),null!=n.credtImgUrl2&&""!=n.credtImgUrl2&&(r.options.user.attr("credtImgUrl2",n.credtImgUrl2),$("#file-submit-input-photo-n img").attr("src",r.getUserPhotoUrl({n:n.credtImgUrl2}))))}).fail(function(e){0})},cardStatusMap:{1:"<span class='label label-disabled'>身份证照片正在审核</span>",2:"<span class='label label-success'>身份证照片已审核</span>",3:"<span class='label label-error'>身份证照片审核不通过，请重新上传</span>"},cardTipsMap:{0:"<span class='label label-error'>尊敬的客户，该笔订单清关时需要上传收货人的身份证照片，为了您更快的收到商品，请尽快上传收货人的身份证照片。</span>",1:"<span class='label label-error'>尊敬的客户，您上传的身份证照片正在审核中，请耐心等待。</span>",3:"<span class='label label-error'>尊敬的客户，您上传的身份证照片审核不通过，请重新上传！为了您更快的收到商品，请尽快上传正确的身份证照片。</span>"},getUserPhotoUrl:function(e){var t=u.sign({level:"USERLOGIN",data:{n:e.n}});return a.setting.api.fileurl+"?"+$.param(t)},setError:function(e){this.element.find(".error-tips").text(e)},setPhotoP:function(){this.component.uploaderPhotoP=new i;var e=this,t={onUploadSuccess:function(t,n){e.component.loading.hide(),$(".error-tips").empty(),$("#leftTip").empty();var r=n.content[0][e.cardPUpname];e.options.user.attr("credtImgUrl1",r),$("#file-submit-input-photo-p img").attr("src",e.getUserPhotoUrl({n:r})),e.component.uploaderPhotoP.reset()},onUploadError:function(t){e.component.loading.hide(),t.status===413&&e.setError.call(e,e.defaults.alert),e.component.uploaderPhotoP.reset()},onUploadBeforeSend:function(t,n){var r=t.file.name;e.cardPUpname="ID_CARD_1"+r.substring(r.lastIndexOf("."),r.length),e.component.uploaderPhotoP.setFileVal(e.cardPUpname),e.component.loading.show()},onError:function(t){e.component.uploaderPhotoP.reset();var n={Q_TYPE_DENIED:"电子照上传失败，选取的文件类型不支持",F_EXCEED_SIZE:"电子照上传失败，大小请控制在5M以内"},r=n[t]||e.defaults.alert;e.setError.call(e,r)}};this.component.uploaderPhotoP.config({pick:"#file-submit-input-photo-p"},t)},setPhotoN:function(){this.component.uploaderPhotoN=new i;var e=this,t={onUploadSuccess:function(t,n){e.component.loading.hide(),$(".error-tips").empty(),$("#rightTip").empty();var r=n.content[0][e.cardPUpname];e.options.user.attr("credtImgUrl2",r),$("#file-submit-input-photo-n img").attr("src",e.getUserPhotoUrl({n:r})),e.component.uploaderPhotoN.reset()},onUploadError:function(t){e.component.loading.hide(),t.status===413&&e.setError.call(e,e.defaults.alert),e.component.uploaderPhotoN.reset()},onUploadBeforeSend:function(t,n){var r=t.file.name;e.cardPUpname="ID_CARD_2"+r.substring(r.lastIndexOf("."),r.length),e.component.uploaderPhotoN.setFileVal(e.cardPUpname),e.component.loading.show()},onError:function(t){e.component.uploaderPhotoP.reset();var n={Q_TYPE_DENIED:"电子照上传失败，选取的文件类型不支持",F_EXCEED_SIZE:"电子照上传失败，大小请控制在5M以内"},r=n[t]||e.defaults.alert;e.setError.call(e,r)}};this.component.uploaderPhotoN.config({pick:"#file-submit-input-photo-n"},t)},statusDescription:{SUBMITED:"您的订单已提交，请尽快完成支付",AUTO_CANCEL:"超时未支付，订单自动取消",USER_CANCEL:"用户取消订单成功",AUDITING:"您的订单已付款成功，正在等待顺丰审核",OPERATION_CANCEL:"订单取消成功",BUYING:"您的订单已经审核通过，不能修改。订单进入顺丰海外采购阶段",WAIT_SHIPPING:"您的订单已经审核通过，不能修改，订单正在等待仓库发货",SHIPPING:"您的订单已经分配给顺丰海外仓，正在等待出库操作",SHIPPED:"您的订单已从顺丰海外仓出库完成，正在进行跨境物流配送",COMPLETED:"您已确认收货，订单已完成",AUTO_COMPLETED:"系统确认订单已签收超过7天，订单自动完成"},getOptionHTML:function(e){var t=this,n=[];return _.each(e,function(e){t.optionHTML[e]&&n.push(t.optionHTML[e])}),n.join("")},operatorMap:{USER:"用户"},optionHTML:{NEEDPAY:'<a href="#" class="btn btn-send" id="pay">立即支付</a>',RECEIVED:'<a href="#" class="btn btn-send received">确认签收</a>'},statsMap:{SUBMITED:"已提交",AUTO_CANCEL:"自动取消",USER_CANCEL:"用户取消",AUDITING:"待审核",OPERATION_CANCEL:"运营取消",BUYING:"采购中",BUYING_EXCEPTION:"采购异常",WAIT_SHIPPING:"待发货",SHIPPING:"正在出库",LOGISTICS_EXCEPTION:"物流异常",SHIPPED:"已发货",COMPLETED:"已完成",AUTO_COMPLETED:"自动完成"},stepMap:{SUBMITED:'<li class="active"><div><h3>提交订单</h3><p></p>2014/12/23 11:34:23<p></p></div><span></span><div class="line"></div></li>',AUDITING:'<li><div><h3>付款成功</h3></div><span></span><div class="line"></div></li>',BUYING:'<li><div><h3>采购中</h3></div><span></span><div class="line"></div></li>',SHIPPING:'<li><div><h3>商品出库</h3></div><span></span><div class="line"></div></li>',COMPLETED:'<li><div><h3>订单完成</h3></div><span></span><div class="line"></div></li>'},nextStepMap:{SUBMITED:"NEEDPAY",SHIPPED:"RECEIVED"},currentStepTipsMap:{SUBMITED:"尊敬的客户，我们还未收到该订单的款项，请您尽快付款。<br />该订单会为您保留2小时（从下单时间算起），2小时后系统将自动取消未付款的订单。",AUTO_CANCEL:"尊敬的客户，由于我们2小时内未收到您的订单款项，订单已被自动取消。<br />订单取消规则：订单会为您保留2小时（从下单时间算起），2小时后系统将自动取消未付款的订单。",USER_CANCEL:"尊敬的客户，您的订单已成功取消，期待您再次使用顺丰海淘。",AUDITING:"尊敬的客户，您的订单正在等待顺丰海淘运营审核。",OPERATION_CANCEL:"尊敬的客户，您的订单已被运营取消，期待您再次使用顺丰海淘。",BUYING:"尊敬的客户，您的订单已经审核通过，不能修改。<br />订单正在进行境外采购，请等待采购结果。",WAIT_SHIPPING:"尊敬的客户，您的订单已经通过系统审核，不能修改。<br />订单正在等待仓库发货。",SHIPPING:"尊敬的客户，您的订单正在顺丰海外仓进行出库操作。<br />网上订单已被打印，目前订单正在等待海外仓库人员进行出库处理。",SHIPPED:"尊敬的客户，您的订单已从顺丰海外仓出库完成，正在进行跨境物流配送。",COMPLETED:"尊敬的客户，您的订单已经完成，感谢您在顺丰海淘购物。",AUTO_COMPLETED:"尊敬的用户，您的订单已经签收超过7天，已自动完成。期待您再次使用顺丰海淘"},"#orderdetail-view click":function(e,t){return $(".orderdetail-upload").show(),$(".mask2").show(),!1},"#orderdetail-save click":function(e,t){var n=this,r=this.options.user.attr();if(typeof r.credtImgUrl1=="undefined"||r.credtImgUrl1==null)return alert("请上传身份证正面！"),!1;if(typeof r.credtImgUrl2=="undefined"||r.credtImgUrl2==null)return alert("请上传身份证反面！"),!1;var i={};i.credtImgUrl1=r.credtImgUrl1,i.credtImgUrl2=r.credtImgUrl2,i.recId=this.options.recId;var s=new f(i);return s.sendRequest().done(function(e){alert("保存成功"),n.render()}).fail(function(e){0}),!1},"#closeDialog click":function(e,t){return $(e).parents(".register").hide(300),$(".mask").hide(),!1},".received click":function(e,t){var n=this,r=new d(null,{tip:"确认要签收该订单？",type:"confirm",okFunction:_.bind(n.received,n,e)});return!1},received:function(t){var n=this,r=e.deparam(window.location.search.substr(1)),i=new m({subOrderId:r.suborderid});i.sendRequest().done(function(e){var t=new d(null,{tip:"确认签收成功！",type:"success"});n.render()}).fail(function(e){var t=new d(null,{tip:"确认签收失败！",type:"error"})})},"#pay click":function(t,n){n&&n.preventDefault();var r=this,i={error:function(){var e=new d(null,{tip:"支付失败！",type:"error",okFunction:function(){r.render()}})}},s=e.deparam(window.location.search.substr(1));c.payV2({orderid:s.orderid},i)}})}),define("sf.b2c.mall.page.orderdetail",["can","jquery","sf.b2c.mall.framework.comm","sf.b2c.mall.component.header","sf.b2c.mall.component.footer","sf.b2c.mall.order.orderdetailcontent"],function(e,t,n,r,i,s){n.register(1);var o=e.Control.extend({init:function(e,t){this.render()},render:function(){new r(".sf-b2c-mall-header",{isForceLogin:!0}),new i(".sf-b2c-mall-footer"),new s(".sf-b2c-mall-orderdetail")},supplement:function(){}});new o("#order")}),require(["sf.b2c.mall.page.orderdetail"]);